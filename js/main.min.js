function toggleToActiveLink(e){for(var i=$(".nav__link"),s=0;s<i.length;s++)if(i[s].classList.contains("nav__link--active")){i[s].classList.remove("nav__link--active");break}e.target.classList.add("nav__link--active")}function setClick_Button_User(e){for(var i=$(".btn_user"),s=0;s<i.length;s++){i[s].addEventListener("click",ShowUserMenu_Sign_in)}for(var t=$(".menu_user_close"),s=0;s<t.length;s++)t[s].addEventListener("click",HideUserMenu_Sign_in);i=$(".user_menu_choice");for(s=0;s<i.length;s++){i[s].addEventListener("click",Choice_User_Menu)}}function ShowUserMenu_Sign_in(e){var i=$(".menu_user");i.slideToggle(5);for(var s=$(".user_menu_choice"),t=0;t<s.length;t++)(i=s[t]).classList.contains("user_menu_choice_active")&&i.classList.remove("user_menu_choice_active");Choice_User_Menu(e)}function HideUserMenu_Sign_in(e){var i=$(".menu_user_registration"),s=$(".menu_user_sign_in"),t=$(".menu_user");i.visible?i.hide():s.visible&&s.hide(),t.closest(),t.hide(),i.find(".alert").length?(i.find(".alert").remove(),$(location).attr("href","/")):s.find(".alert").length&&(s.find(".alert").remove(),$(location).attr("href","/"))}function Choice_User_Menu(e){var i,s=$("."+e.target.value);s[0]&&(s[0].classList.contains("is-hidden")&&s[0].classList.remove("is-hidden"),i=$(".menu_user_registration"),e=$(".menu_user_sign_in"),s[0].classList.contains("menu_sign_in")?(e[0].classList.contains("is-hidden")&&e[0].classList.remove("is-hidden"),e.css("max-height","215px"),i[0].classList.add("is-hidden")):(i[0].classList.contains("is-hidden")&&i[0].classList.remove("is-hidden"),i.css("max-height","295px"),e[0].classList.add("is-hidden")),s.visible?s.hide():s.show())}function showUsersForm(){var e=$(".menu_user_registration"),i=$(".menu_user_sign_in");e.find(".alert").length?(e.css("max-height","355px"),e.show()):i.find(".alert").length&&(i.css("max-height","255px"),i.show())}function CreateListItems(){var e=$(".sidebar-menu");category_list=["Блузы","Рубашки","Платья","Юбки","Брюки","Джемперы","Свитеры","Кардиганы","Кофты","Пиджаки","Костюмы"];for(var i=0;i<e.length;i++){var s=e[i];if(!0!==s.classList.contains("list-stocks"))for(var t=0;t<category_list.length;t++){var n=document.createElement("li");n.classList.add("sidebar-menu"),n.classList.add("list--choice"),n.href="#";var r=document.createTextNode(list[t]);n.appendChild(r),s.appendChild(n)}}}function change_main_photo(e){var i=$(".hero-img").attr("src"),i=list_main_photo.indexOf(i);list_main_photo.length==i+1?$(".hero-img").attr("src",list_main_photo[0]):$(".hero-img").attr("src",list_main_photo[i+1])}function FillSellList(){$(".container_grid");sell_list=create_sell_list(),fill_sell_list(1)}function fix_main_menu(){var e=$(".header_mainmenu"),i=$(".sidebar"),s=$(".hero"),t=$(".span_hero");$(window).scroll(function(){187<$(this).scrollTop()?(e.addClass("fix_class_main_menu"),i.addClass("fix_class_side_bar"),s.addClass("fix_class_hero"),t.addClass("margin_top")):(e.removeClass("fix_class_main_menu"),i.removeClass("fix_class_side_bar"),s.removeClass("fix_class_hero"),t.removeClass("margin_top"))})}function create_sell_list(){return[[{id_number:"1",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/8.jpg",category:"dress"},{id_number:"2",name:"Крутое платье для выходных",old_price:"200 $",price:"155 $",scr:"images/dress/17.jpg",category:"dress"},{id_number:"3",name:"Крутое платье для выходных",old_price:"60 $",price:"55 $",scr:"images/dress/18.jpg",category:"dress"},{id_number:"4",name:"Крутое платье для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"dress"},{id_number:"5",name:"Крутое платье для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"dress"},{id_number:"6",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"dress"}],[{id_number:"7",name:"Крутая футболка для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"t-short"},{id_number:"8",name:"Крутая футболка для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"t-short"},{id_number:"9",name:"Крутая футболка для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"t-short"}]]}function fill_sell_list(e,i){var s=sell_list.length,t=6*e,n=t-6+1;if(n<s)for(var r=$(".grid_main_item"),a=0;n<=t;n++){$(r[a]);s[n],a++}}function addEventShowAddImage(){var e=$(".main_image_admin_form");e[0]&&this.files[0]&&(e[0].childNodes.length=0,child_img=e[0].childNodes[0],child_img.src=this.files[0])}function addEventShowOthersAddImage(){var e=$(".others_image_admin_form");if(e[0]&&this.files.length)for(var i,s=0;s<this.files.length;s++){e[0].childNodes[s]?(i=e[0].childNodes[s]).src=window.URL.createObjectURL(this.files[s]):((i=document.createElement("img")).src=window.URL.createObjectURL(this.files[s]),i.onload=function(){window.URL.revokeObjectURL(this.src)});var t=$(".others_image_admin_form img");if(6==t.length)break;t[0]?e[0].insertBefore(i,t[0]):e[0].appendChild(i)}}function clear_photo_in_admin_page(){for(var e=$(".others_image_admin_form");e[0].firstChild;)e[0].removeChild(e[0].firstChild)}function slide_active_admin_form(e){e=(e?e.target:this).id;for(var i=$(".admin_form"),s=0;s<=i.length;s++){var t=i[s];t&&t.classList.contains("active_admin_form")&&t.classList.remove("active_admin_form")}"edit_items_page"==e?$(location).attr("href","/edit_items_page"):"/"==e?$(location).attr("href","/"):"/edit_items_page"==location.pathname?$(location).attr("href","/admin"):(e=$("."+e))[0]&&e[0].classList.add("active_admin_form")}function img_edit_selected(e){e=e.target.id;$(location).attr("href","/edit_items_page?param1="+e)}window.onload=function(){for(var e=$(".nav__link"),i=0;i<e.length;i++){e[i].addEventListener("click",toggleToActiveLink)}setClick_Button_User(),showUsersForm(),$("#input_img")[0]&&$("#input_img")[0].addEventListener("input",addEventShowAddImage,!1),$("#input_other_img")[0]&&$("#input_other_img")[0].addEventListener("input",addEventShowOthersAddImage,!1),$("#clear_photo")[0]&&$("#clear_photo")[0].addEventListener("click",clear_photo_in_admin_page,!1);for(var s=$(".sidebar_admin_li"),t=0;t<s.length;t++)s[t]&&s[t].addEventListener("click",slide_active_admin_form,!1);for(var n=$(".grid_item_img"),t=0;t<=n.length;t++)n[t]&&n[t].addEventListener("click",img_edit_selected,!1)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiLCJoZXJvLmpzIiwiYWRtaW5fcGFnZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlVG9BY3RpdmVMaW5rIiwiZXZlbnQiLCJsaW5rcyIsIiQiLCJpbmRleCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGFyZ2V0IiwiYWRkIiwic2V0Q2xpY2tfQnV0dG9uX1VzZXIiLCJidXR0b25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3dVc2VyTWVudV9TaWduX2luIiwibWVudV91c2VyX2Nsb3NlIiwiSGlkZVVzZXJNZW51X1NpZ25faW4iLCJDaG9pY2VfVXNlcl9NZW51IiwidGVtcCIsInNsaWRlVG9nZ2xlIiwidXNlcl9tZW51X2Nob2ljZXMiLCJtZW51X3JlZ2lzdHJhdGlvbiIsIm1lbnVfc2lnbl9pbiIsInVzZXJfZm9ybSIsInZpc2libGUiLCJoaWRlIiwiY2xvc2VzdCIsImZpbmQiLCJsb2NhdGlvbiIsImF0dHIiLCJ0ZW1wX3ZhbHVlIiwidmFsdWUiLCJjc3MiLCJzaG93Iiwic2hvd1VzZXJzRm9ybSIsIkNyZWF0ZUxpc3RJdGVtcyIsIm1haW5fX2xpc3QiLCJjYXRlZ29yeV9saXN0IiwiaSIsIml0ZW0iLCJjIiwiY2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwibGlzdCIsImFwcGVuZENoaWxkIiwiY2hhbmdlX21haW5fcGhvdG8iLCJoZXJvc2VjdGlvbiIsImluZGV4X2N1cnJlbnRfaW1nIiwibGlzdF9tYWluX3Bob3RvIiwiaW5kZXhPZiIsIkZpbGxTZWxsTGlzdCIsInNlbGxfbGlzdCIsImNyZWF0ZV9zZWxsX2xpc3QiLCJmaWxsX3NlbGxfbGlzdCIsImZpeF9tYWluX21lbnUiLCJlbGVtX21lbnUiLCJlbGVtX3NpZGVfYmFyIiwiZWxlbV9oZXJvIiwic3Bhbl9oZXJvIiwid2luZG93Iiwic2Nyb2xsIiwidGhpcyIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJpZF9udW1iZXIiLCJuYW1lIiwib2xkX3ByaWNlIiwicHJpY2UiLCJzY3IiLCJjYXRlZ29yeSIsInBhZ2VfbnVtYmVyIiwic2VsbF9jYXRlZ29yeSIsImNvdW50c19pdGVtcyIsIm1heF9pdGVtc19vbl9wYWdlIiwibWluX2l0ZW1zX29uX3BhZ2UiLCJncmlkX21haW5faXRlbXMiLCJhZGRFdmVudFNob3dBZGRJbWFnZSIsImFkbWluX2ltZ19ibG9jayIsImZpbGVzIiwiY2hpbGROb2RlcyIsImNoaWxkX2ltZyIsInNyYyIsImFkZEV2ZW50U2hvd090aGVyc0FkZEltYWdlIiwiYWRtaW5faW1hZ2VzX2Jsb2NrIiwiaW1nIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwib25sb2FkIiwicmV2b2tlT2JqZWN0VVJMIiwiaW1nX2VsZW0iLCJpbnNlcnRCZWZvcmUiLCJjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwic2xpZGVfYWN0aXZlX2FkbWluX2Zvcm0iLCJjdXJyZW50X2Zvcm0iLCJpZCIsImFkbWluX2Zvcm1zIiwidGVtcF9mb3JtIiwicGF0aG5hbWUiLCJhY3RpdmF0ZWZvcm0iLCJpbWdfZWRpdF9zZWxlY3RlZCIsImlkX3NlbGVjdGVkX2l0ZW0iLCJuYXZfaXRlbSIsImFkbWluX2l0ZW1zX2xpIiwiYWRtaW5faW1nX2VkaXQiXSwibWFwcGluZ3MiOiJBQUNBLFNBQUFBLG1CQUFBQyxHQUlBLElBRkEsSUFBQUMsRUFBQUMsRUFBQSxjQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQ0EsR0FBQUYsRUFBQUUsR0FBQUUsVUFBQUMsU0FBQSxxQkFBQSxDQUNBTCxFQUFBRSxHQUFBRSxVQUFBRSxPQUFBLHFCQUNBLE1BSUFQLEVBQUFRLE9BQUFILFVBQUFJLElBQUEscUJBSUEsU0FBQUMscUJBQUFWLEdBSUEsSUFGQSxJQUFBVyxFQUFBVCxFQUFBLGFBRUFDLEVB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LEdDekhBNUMsT0FBQTZCLE9BQUEsV0FJQSxJQUZBLElBQUFnQixFQUFBekcsRUFBQSxjQUVBQyxFQUFBLEVBQUFBLEVBQUF3RyxFQUFBdkcsT0FBQUQsSUFBQSxDQUVBd0csRUFBQXhHLEdBQ0FTLGlCQUFBLFFBQUFiLG9CQU1BVyx1QkFDQXVCLGdCQUdBL0IsRUFBQSxjQUFBLElBQ0FBLEVBQUEsY0FBQSxHQUFBVSxpQkFBQSxRQUFBb0Usc0JBQUEsR0FHQTlFLEVBQUEsb0JBQUEsSUFDQUEsRUFBQSxvQkFBQSxHQUFBVSxpQkFBQSxRQUFBMEUsNEJBQUEsR0FHQXBGLEVBQUEsZ0JBQUEsSUFDQUEsRUFBQSxnQkFBQSxHQUFBVSxpQkFBQSxRQUFBbUYsMkJBQUEsR0FLQSxJQUZBLElBQUFhLEVBQUExRyxFQUFBLHFCQUVBbUMsRUFBQSxFQUFBQSxFQUFBdUUsRUFBQXhHLE9BQUFpQyxJQUNBdUUsRUFBQXZFLElBQ0F1RSxFQUFBdkUsR0FBQXpCLGlCQUFBLFFBQUFzRix5QkFBQSxHQU1BLElBRkEsSUFBQVcsRUFBQTNHLEVBQUEsa0JBRUFtQyxFQUFBLEVBQUFBLEdBQUF3RSxFQUFBekcsT0FBQWlDLElBQ0F3RSxFQUFBeEUsSUFDQXdFLEVBQUF4RSxHQUFBekIsaUJBQUEsUUFBQTZGLG1CQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIHRvZ2dsZVRvQWN0aXZlTGluayAoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgbGlua3MgPSAkKCcubmF2X19saW5rJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxpbmtzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgIGlmIChsaW5rc1tpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCduYXZfX2xpbmstLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGxpbmtzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCduYXZfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ25hdl9fbGluay0tYWN0aXZlJyk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDbGlja19CdXR0b25fVXNlcihldmVudCkge1xyXG5cclxuICAgIHZhciBidXR0b25zID0gJCgnLmJ0bl91c2VyJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGJ1dHRvbnMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcF9idG4gPSBidXR0b25zW2luZGV4XTtcclxuICAgICAgICB0ZW1wX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIFNob3dVc2VyTWVudV9TaWduX2luKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbWVudV91c2VyX2Nsb3NlID0gJCgnLm1lbnVfdXNlcl9jbG9zZScpO1xyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG1lbnVfdXNlcl9jbG9zZS5sZW5ndGg7IGluZGV4KysgKSB7XHJcbiAgICAgICAgbWVudV91c2VyX2Nsb3NlW2luZGV4XS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEhpZGVVc2VyTWVudV9TaWduX2luKTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25zID0gJCgnLnVzZXJfbWVudV9jaG9pY2UnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYnV0dG9ucy5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2J0biA9IGJ1dHRvbnNbaW5kZXhdO1xyXG4gICAgICAgIHRlbXBfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ2hvaWNlX1VzZXJfTWVudSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBTaG93VXNlck1lbnVfU2lnbl9pbihldmVudCkge1xyXG5cclxuICAgIHZhciB0ZW1wID0gJCgnLm1lbnVfdXNlcicpO1xyXG4gICAgdGVtcC5zbGlkZVRvZ2dsZSg1KTtcclxuXHJcbiAgICB2YXIgdXNlcl9tZW51X2Nob2ljZXMgPSAkKCcudXNlcl9tZW51X2Nob2ljZScpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB1c2VyX21lbnVfY2hvaWNlcy5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHRlbXAgPSB1c2VyX21lbnVfY2hvaWNlc1tpbmRleF07XHJcbiAgICAgICAgaWYodGVtcC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXJfbWVudV9jaG9pY2VfYWN0aXZlJykpe1xyXG4gICAgICAgICAgICB0ZW1wLmNsYXNzTGlzdC5yZW1vdmUoJ3VzZXJfbWVudV9jaG9pY2VfYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENob2ljZV9Vc2VyX01lbnUoZXZlbnQpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gSGlkZVVzZXJNZW51X1NpZ25faW4oZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgbWVudV9yZWdpc3RyYXRpb24gPSAkKCcubWVudV91c2VyX3JlZ2lzdHJhdGlvbicpO1xyXG4gICAgdmFyIG1lbnVfc2lnbl9pbiA9ICQoJy5tZW51X3VzZXJfc2lnbl9pbicpO1xyXG4gICAgdmFyIHVzZXJfZm9ybSA9ICQoJy5tZW51X3VzZXInKTtcclxuXHJcbiAgICBpZiAobWVudV9yZWdpc3RyYXRpb24udmlzaWJsZSl7XHJcbiAgICAgICAgbWVudV9yZWdpc3RyYXRpb24uaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYobWVudV9zaWduX2luLnZpc2libGUpe1xyXG4gICAgICAgIG1lbnVfc2lnbl9pbi5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXNlcl9mb3JtLmNsb3Nlc3QoKVxyXG4gICAgdXNlcl9mb3JtLmhpZGUoKTtcclxuXHJcbiAgICBpZihtZW51X3JlZ2lzdHJhdGlvbi5maW5kKCcuYWxlcnQnKS5sZW5ndGgpe1xyXG4gICAgICAgIG1lbnVfcmVnaXN0cmF0aW9uLmZpbmQoJy5hbGVydCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZihtZW51X3NpZ25faW4uZmluZCgnLmFsZXJ0JykubGVuZ3RoKXtcclxuICAgICAgICBtZW51X3NpZ25faW4uZmluZCgnLmFsZXJ0JykucmVtb3ZlKCk7XHJcbiAgICAgICAgJChsb2NhdGlvbikuYXR0cignaHJlZicsJy8nKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gQ2hvaWNlX1VzZXJfTWVudShldmVudCkge1xyXG5cclxuICAgIHZhciB0ZW1wX3ZhbHVlID0gJCgnLicgKyBldmVudC50YXJnZXQudmFsdWUpO1xyXG5cclxuICAgIGlmKCF0ZW1wX3ZhbHVlWzBdKXtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGVtcF92YWx1ZVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWhpZGRlbicpKXtcclxuICAgICAgICB0ZW1wX3ZhbHVlWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBtZW51X3JlZ2lzdHJhdGlvbiA9ICQoJy5tZW51X3VzZXJfcmVnaXN0cmF0aW9uJyk7XHJcbiAgICB2YXIgbWVudV9zaWduX2luID0gJCgnLm1lbnVfdXNlcl9zaWduX2luJyk7XHJcblxyXG4gICAgaWYodGVtcF92YWx1ZVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnVfc2lnbl9pbicpICl7XHJcblxyXG4gICAgICAgIGlmKG1lbnVfc2lnbl9pblswXS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWhpZGRlbicpKXtcclxuICAgICAgICAgICAgbWVudV9zaWduX2luWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhpZGRlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVudV9zaWduX2luLmNzcygnbWF4LWhlaWdodCcsJzIxNXB4Jyk7XHJcbiAgICAgICAgbWVudV9yZWdpc3RyYXRpb25bMF0uY2xhc3NMaXN0LmFkZCgnaXMtaGlkZGVuJyk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcblxyXG4gICAgICAgIGlmKG1lbnVfcmVnaXN0cmF0aW9uWzBdLmNsYXNzTGlzdC5jb250YWlucygnaXMtaGlkZGVuJykpe1xyXG4gICAgICAgICAgICBtZW51X3JlZ2lzdHJhdGlvblswXS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1oaWRkZW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lbnVfcmVnaXN0cmF0aW9uLmNzcygnbWF4LWhlaWdodCcsJzI5NXB4Jyk7XHJcbiAgICAgICAgbWVudV9zaWduX2luWzBdLmNsYXNzTGlzdC5hZGQoJ2lzLWhpZGRlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKHRlbXBfdmFsdWUudmlzaWJsZSl7XHJcbiAgICAgICAgdGVtcF92YWx1ZS5oaWRlKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0ZW1wX3ZhbHVlLnNob3coKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dVc2Vyc0Zvcm0oKSB7XHJcblxyXG4gICAgdmFyIG1lbnVfcmVnaXN0cmF0aW9uID0gJCgnLm1lbnVfdXNlcl9yZWdpc3RyYXRpb24nKTtcclxuICAgIHZhciBtZW51X3NpZ25faW4gPSAkKCcubWVudV91c2VyX3NpZ25faW4nKTtcclxuXHJcbiAgICBpZihtZW51X3JlZ2lzdHJhdGlvbi5maW5kKCcuYWxlcnQnKS5sZW5ndGgpe1xyXG4gICAgICAgIG1lbnVfcmVnaXN0cmF0aW9uLmNzcygnbWF4LWhlaWdodCcsJzM1NXB4Jyk7XHJcbiAgICAgICAgbWVudV9yZWdpc3RyYXRpb24uc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYobWVudV9zaWduX2luLmZpbmQoJy5hbGVydCcpLmxlbmd0aCl7XHJcbiAgICAgICAgbWVudV9zaWduX2luLmNzcygnbWF4LWhlaWdodCcsJzI1NXB4Jyk7XHJcbiAgICAgICAgbWVudV9zaWduX2luLnNob3coKTtcclxuICAgIH1cclxufSIsIlxyXG5mdW5jdGlvbiBDcmVhdGVMaXN0SXRlbXMoKSB7XHJcblxyXG4gICAgdmFyIG1haW5fX2xpc3QgPSAkKCcuc2lkZWJhci1tZW51Jyk7XHJcbiAgICBjYXRlZ29yeV9saXN0ID0gWyfQkdC70YPQt9GLJywgJ9Cg0YPQsdCw0YjQutC4JywgJ9Cf0LvQsNGC0YzRjycsICfQrtCx0LrQuCcsICfQkdGA0Y7QutC4JywgJ9CU0LbQtdC80L/QtdGA0YsnLCAn0KHQstC40YLQtdGA0YsnLCAn0JrQsNGA0LTQuNCz0LDQvdGLJywgJ9Ca0L7RhNGC0YsnLCAn0J/QuNC00LbQsNC60LgnLCAn0JrQvtGB0YLRjtC80YsnXTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaTwgbWFpbl9fbGlzdC5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICB2YXIgaXRlbSA9IG1haW5fX2xpc3RbaV07XHJcblxyXG4gICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnbGlzdC1zdG9ja3MnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGMgPTA7IGMgPCBjYXRlZ29yeV9saXN0Lmxlbmd0aDsgYysrKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XHJcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ3NpZGViYXItbWVudScpO1xyXG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdsaXN0LS1jaG9pY2UnKTtcclxuICAgICAgICAgICAgY2hpbGQuaHJlZiA9ICcjJztcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShsaXN0W2NdKTtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VfbWFpbl9waG90byhldmVudCkge1xyXG5cclxuICAgIHZhciBoZXJvc2VjdGlvbiA9ICQoJy5oZXJvLWltZycpLmF0dHIoXCJzcmNcIik7XHJcblxyXG4gICAgdmFyIGluZGV4X2N1cnJlbnRfaW1nID0gbGlzdF9tYWluX3Bob3RvLmluZGV4T2YoaGVyb3NlY3Rpb24pO1xyXG5cclxuICAgaWYgKGxpc3RfbWFpbl9waG90by5sZW5ndGggPT0gaW5kZXhfY3VycmVudF9pbWcgKyAxKSB7XHJcblxyXG4gICAgICAgJCgnLmhlcm8taW1nJykuYXR0cihcInNyY1wiLCBsaXN0X21haW5fcGhvdG9bMF0pO1xyXG4gICB9XHJcbiAgIGVsc2Uge1xyXG4gICAgICAgJCgnLmhlcm8taW1nJykuYXR0cihcInNyY1wiLCBsaXN0X21haW5fcGhvdG9baW5kZXhfY3VycmVudF9pbWcgKyAxXSk7XHJcbiAgICAgICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBGaWxsU2VsbExpc3QoKSB7XHJcblxyXG4gICAgdmFyIG1haW5fX2xpc3QgPSAkKCcuY29udGFpbmVyX2dyaWQnKTtcclxuICAgIHNlbGxfbGlzdCA9IGNyZWF0ZV9zZWxsX2xpc3QoKTtcclxuICAgIGZpbGxfc2VsbF9saXN0KDEpO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZml4X21haW5fbWVudSgpIHtcclxuXHJcbiAgICB2YXIgZWxlbV9tZW51ID0gJCgnLmhlYWRlcl9tYWlubWVudScpO1xyXG4gICAgdmFyIGVsZW1fc2lkZV9iYXIgPSAkKCcuc2lkZWJhcicpO1xyXG4gICAgdmFyIGVsZW1faGVybyA9ICQoJy5oZXJvJyk7XHJcbiAgICB2YXIgc3Bhbl9oZXJvID0gJCgnLnNwYW5faGVybycpO1xyXG5cclxuXHJcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgPiAxODcpIHtcclxuICAgICAgICAgICAgZWxlbV9tZW51LmFkZENsYXNzKFwiZml4X2NsYXNzX21haW5fbWVudVwiKTtcclxuICAgICAgICAgICAgZWxlbV9zaWRlX2Jhci5hZGRDbGFzcyhcImZpeF9jbGFzc19zaWRlX2JhclwiKTtcclxuICAgICAgICAgICAgZWxlbV9oZXJvLmFkZENsYXNzKFwiZml4X2NsYXNzX2hlcm9cIik7XHJcbiAgICAgICAgICAgIHNwYW5faGVyby5hZGRDbGFzcyhcIm1hcmdpbl90b3BcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbV9tZW51LnJlbW92ZUNsYXNzKFwiZml4X2NsYXNzX21haW5fbWVudVwiKTtcclxuICAgICAgICAgICAgZWxlbV9zaWRlX2Jhci5yZW1vdmVDbGFzcyhcImZpeF9jbGFzc19zaWRlX2JhclwiKTtcclxuICAgICAgICAgICAgZWxlbV9oZXJvLnJlbW92ZUNsYXNzKFwiZml4X2NsYXNzX2hlcm9cIik7XHJcbiAgICAgICAgICAgIHNwYW5faGVyby5yZW1vdmVDbGFzcyhcIm1hcmdpbl90b3BcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZV9zZWxsX2xpc3QoKSB7XHJcblxyXG4gICAgdmFyIGl0ZW0xID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCIxXCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjMwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzguanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTIgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjJcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMjAwICRcIixcclxuICAgICAgICBwcmljZTogXCIxNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTcuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTMgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjNcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiNjAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE4LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW00ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI0XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjgwICRcIixcclxuICAgICAgICBwcmljZTogXCI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xMC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtNSA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiNVwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIxMjAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjEwNSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtNiA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiNlwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIzMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjI1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNi5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtNyA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiN1wiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiODAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzEwLmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcInQtc2hvcnRcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTggPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjhcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0LDRjyDRhNGD0YLQsdC+0LvQutCwINC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjEyMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMTA1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE0LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcInQtc2hvcnRcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTkgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjlcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0LDRjyDRhNGD0YLQsdC+0LvQutCwINC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjMwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE2LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcInQtc2hvcnRcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZHJlc3MgPSBbaXRlbTEsaXRlbTIsaXRlbTMsaXRlbTQsaXRlbTUsaXRlbTZdO1xyXG4gICAgdmFyIHRfc2hvcnQgPSBbaXRlbTcsaXRlbTgsaXRlbTldO1xyXG4gICAgcmV0dXJuIFtkcmVzcyx0X3Nob3J0XTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmlsbF9zZWxsX2xpc3QocGFnZV9udW1iZXIsc2VsbF9jYXRlZ29yeSkge1xyXG5cclxuICAgIHZhciBjb3VudHNfaXRlbXMgPSBzZWxsX2xpc3QubGVuZ3RoO1xyXG4gICAgdmFyIG1heF9pdGVtc19vbl9wYWdlID0gNiAqIHBhZ2VfbnVtYmVyO1xyXG4gICAgdmFyIG1pbl9pdGVtc19vbl9wYWdlID0gbWF4X2l0ZW1zX29uX3BhZ2UgLSA2ICsgMTtcclxuXHJcbiAgICBpZiAoY291bnRzX2l0ZW1zID4gbWluX2l0ZW1zX29uX3BhZ2UpIHtcclxuXHJcbiAgICB2YXIgZ3JpZF9tYWluX2l0ZW1zID0gJCgnLmdyaWRfbWFpbl9pdGVtJyk7XHJcbiAgICB2YXIgaSA9IDA7XHJcblxyXG4gICAgZm9yIChtaW5faXRlbXNfb25fcGFnZTsgbWluX2l0ZW1zX29uX3BhZ2UgPD0gbWF4X2l0ZW1zX29uX3BhZ2U7IG1pbl9pdGVtc19vbl9wYWdlKyspIHtcclxuXHJcbiAgICB2YXIgYXJyX3NlbGxfYmxvY2sgPSAkKGdyaWRfbWFpbl9pdGVtc1tpXSk7XHJcblxyXG4gICAgaWYgKGNvdW50c19pdGVtc1ttaW5faXRlbXNfb25fcGFnZV0pIHtcclxuXHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIH1cclxufSIsIlxyXG5mdW5jdGlvbiBhZGRFdmVudFNob3dBZGRJbWFnZSgpIHtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1nX2Jsb2NrID0gJCgnLm1haW5faW1hZ2VfYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGlmKGFkbWluX2ltZ19ibG9ja1swXSAmJiB0aGlzLmZpbGVzWzBdKSB7XHJcblxyXG4gICAgICAgIGlmKGFkbWluX2ltZ19ibG9ja1swXS5jaGlsZE5vZGVzLmxlbmd0aCA9IDApIHtcclxuICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGVzWzBdKTtcclxuICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuc3JjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZG1pbl9pbWdfYmxvY2tbMF0uYXBwZW5kQ2hpbGQoaW1nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY2hpbGRfaW1nID0gYWRtaW5faW1nX2Jsb2NrWzBdLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgICAgIGNoaWxkX2ltZy5zcmMgPSB0aGlzLmZpbGVzWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRXZlbnRTaG93T3RoZXJzQWRkSW1hZ2UoKSB7XHJcblxyXG4gICAgdmFyIGFkbWluX2ltYWdlc19ibG9jayA9ICQoJy5vdGhlcnNfaW1hZ2VfYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGlmKGFkbWluX2ltYWdlc19ibG9ja1swXSAmJiB0aGlzLmZpbGVzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlcy5sZW5ndGg7aSsrKXtcclxuXHJcbiAgICAgICAgICAgIGlmKGFkbWluX2ltYWdlc19ibG9ja1swXS5jaGlsZE5vZGVzW2ldKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmNoaWxkTm9kZXNbaV07XHJcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwodGhpcy5maWxlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGltZ19lbGVtID0gJCgnLm90aGVyc19pbWFnZV9hZG1pbl9mb3JtIGltZycpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGltZ19lbGVtLmxlbmd0aCA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoaW1nX2VsZW1bMF0pIHtcclxuICAgICAgICAgICAgICAgIGFkbWluX2ltYWdlc19ibG9ja1swXS5pbnNlcnRCZWZvcmUoaW1nLGltZ19lbGVtWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFkbWluX2ltYWdlc19ibG9ja1swXS5hcHBlbmRDaGlsZChpbWcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSgpIHtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1hZ2VzX2Jsb2NrID0gJCgnLm90aGVyc19pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgd2hpbGUgKGFkbWluX2ltYWdlc19ibG9ja1swXS5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLnJlbW92ZUNoaWxkKGFkbWluX2ltYWdlc19ibG9ja1swXS5maXJzdENoaWxkKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2xpZGVfYWN0aXZlX2FkbWluX2Zvcm0oZXZlbnQpIHtcclxuXHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgY3VycmVudF9mb3JtID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRfZm9ybSA9IHRoaXMuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFkbWluX2Zvcm1zID0gJCgnLmFkbWluX2Zvcm0nKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBhZG1pbl9mb3Jtcy5sZW5ndGg7IGkrKyApe1xyXG5cclxuICAgICAgICB2YXIgdGVtcF9mb3JtID0gYWRtaW5fZm9ybXNbaV07XHJcblxyXG4gICAgICAgIGlmKCF0ZW1wX2Zvcm0pe1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRlbXBfZm9ybS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZV9hZG1pbl9mb3JtJykpe1xyXG4gICAgICAgICAgICB0ZW1wX2Zvcm0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlX2FkbWluX2Zvcm0nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihjdXJyZW50X2Zvcm0gPT0gJ2VkaXRfaXRlbXNfcGFnZScpe1xyXG5cclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL2VkaXRfaXRlbXNfcGFnZScpO1xyXG5cclxuICAgIH1cclxuICAgIGVsc2UgaWYoY3VycmVudF9mb3JtID09ICcvJyl7XHJcbiAgICAgICAgJChsb2NhdGlvbikuYXR0cignaHJlZicsJy8nKTtcclxuXHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG5cclxuICAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lID09ICcvZWRpdF9pdGVtc19wYWdlJykge1xyXG4gICAgICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL2FkbWluJyk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgIHZhciBhY3RpdmF0ZWZvcm0gPSAkKCcuJyArIGN1cnJlbnRfZm9ybSk7XHJcbiAgICAgICAgICAgICBpZihhY3RpdmF0ZWZvcm1bMF0pIHtcclxuICAgICAgICAgICAgICAgICBhY3RpdmF0ZWZvcm1bMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlX2FkbWluX2Zvcm0nKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbWdfZWRpdF9zZWxlY3RlZChldmVudCkge1xyXG5cclxuICAgIHZhciBpZF9zZWxlY3RlZF9pdGVtID0gZXZlbnQudGFyZ2V0LmlkO1xyXG4gICAgJChsb2NhdGlvbikuYXR0cignaHJlZicsJy9lZGl0X2l0ZW1zX3BhZ2U/cGFyYW0xPScgKyBpZF9zZWxlY3RlZF9pdGVtKTtcclxuXHJcbn0iLCJcclxud2luZG93Lm9ubG9hZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgbmF2X2l0ZW0gPSAkKCcubmF2X19saW5rJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG5hdl9pdGVtLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdmFyIHRlbXAgPSBuYXZfaXRlbVtpbmRleF07XHJcbiAgICAgICAgdGVtcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVRvQWN0aXZlTGluayk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qTGlzdCAqL1xyXG5cclxuICAgIHNldENsaWNrX0J1dHRvbl9Vc2VyKCk7XHJcbiAgICBzaG93VXNlcnNGb3JtKCk7XHJcblxyXG4gICAgLy9BZG1pbiBwYWdlLy9cclxuICAgIGlmKCQoJyNpbnB1dF9pbWcnKVswXSkge1xyXG4gICAgICAgICQoJyNpbnB1dF9pbWcnKVswXS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFkZEV2ZW50U2hvd0FkZEltYWdlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCgnI2lucHV0X290aGVyX2ltZycpWzBdKSB7XHJcbiAgICAgICAgJCgnI2lucHV0X290aGVyX2ltZycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYWRkRXZlbnRTaG93T3RoZXJzQWRkSW1hZ2UsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZigkKCcjY2xlYXJfcGhvdG8nKVswXSkge1xyXG4gICAgICAgICQoJyNjbGVhcl9waG90bycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhZG1pbl9pdGVtc19saSA9ICQoJy5zaWRlYmFyX2FkbWluX2xpJyk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGFkbWluX2l0ZW1zX2xpLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihhZG1pbl9pdGVtc19saVtpXSkge1xyXG4gICAgICAgICAgICBhZG1pbl9pdGVtc19saVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2xpZGVfYWN0aXZlX2FkbWluX2Zvcm0sZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1nX2VkaXQgPSAkKCcuZ3JpZF9pdGVtX2ltZycpO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPD0gYWRtaW5faW1nX2VkaXQubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKGFkbWluX2ltZ19lZGl0W2ldKSB7XHJcbiAgICAgICAgICAgIGFkbWluX2ltZ19lZGl0W2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW1nX2VkaXRfc2VsZWN0ZWQsIGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIl19
