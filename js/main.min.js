function toggleToActiveLink(e){for(var i=$(".nav__link"),s=0;s<i.length;s++)if(i[s].classList.contains("nav__link--active")){i[s].classList.remove("nav__link--active");break}e.target.classList.add("nav__link--active")}function setClick_Button_User(e){for(var i=$(".btn_user"),s=0;s<i.length;s++){i[s].addEventListener("click",ShowUserMenu_Sign_in)}for(var n=$(".menu_user_close"),s=0;s<n.length;s++)n[s].addEventListener("click",HideUserMenu_Sign_in);i=$(".user_menu_choice");for(s=0;s<i.length;s++){i[s].addEventListener("click",Choice_User_Menu)}}function ShowUserMenu_Sign_in(e){var i=$(".menu_user");i.slideToggle(5);for(var s=$(".user_menu_choice"),n=0;n<s.length;n++)(i=s[n]).classList.contains("user_menu_choice_active")&&i.classList.remove("user_menu_choice_active");Choice_User_Menu(e)}function HideUserMenu_Sign_in(e){$(".menu_user_registration").visible?$(".menu_user_registration").hide():$(".menu_user_sign_in").visible&&$(".menu_user_sign_in").hide(),$(".menu_user").hide()}function Choice_User_Menu(e){var i,s=$("."+e.target.value);s[0]&&(s[0].classList.contains("is-hidden")&&s[0].classList.remove("is-hidden"),i=$(".menu_user_registration"),e=$(".menu_user_sign_in"),s[0].classList.contains("menu_sign_in")?(e[0].classList.contains("is-hidden")&&e[0].classList.remove("is-hidden"),e.css("max-height","215px"),i[0].classList.add("is-hidden")):(i[0].classList.contains("is-hidden")&&i[0].classList.remove("is-hidden"),i.css("max-height","295px"),e[0].classList.add("is-hidden")),s.visible?s.hide():s.show())}function User_Log_in(e){Check_Users_Information_Fill();$(".user_login").val(),$(".user_pass").val()}function Check_Users_Information_Fill(){}function CreateListItems(){var e=$(".sidebar-menu");category_list=["Блузы","Рубашки","Платья","Юбки","Брюки","Джемперы","Свитеры","Кардиганы","Кофты","Пиджаки","Костюмы"];for(var i=0;i<e.length;i++){var s=e[i];if(!0!==s.classList.contains("list-stocks"))for(var n=0;n<category_list.length;n++){var t=document.createElement("li");t.classList.add("sidebar-menu"),t.classList.add("list--choice"),t.href="#";var r=document.createTextNode(list[n]);t.appendChild(r),s.appendChild(t)}}}function change_main_photo(e){var i=$(".hero-img").attr("src"),i=list_main_photo.indexOf(i);list_main_photo.length==i+1?$(".hero-img").attr("src",list_main_photo[0]):$(".hero-img").attr("src",list_main_photo[i+1])}function FillSellList(){$(".container_grid");sell_list=create_sell_list(),fill_sell_list(1)}function fix_main_menu(){var e=$(".header_mainmenu"),i=$(".sidebar"),s=$(".hero"),n=$(".span_hero");$(window).scroll(function(){187<$(this).scrollTop()?(e.addClass("fix_class_main_menu"),i.addClass("fix_class_side_bar"),s.addClass("fix_class_hero"),n.addClass("margin_top")):(e.removeClass("fix_class_main_menu"),i.removeClass("fix_class_side_bar"),s.removeClass("fix_class_hero"),n.removeClass("margin_top"))})}function create_sell_list(){return[[{id_number:"1",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/8.jpg",category:"dress"},{id_number:"2",name:"Крутое платье для выходных",old_price:"200 $",price:"155 $",scr:"images/dress/17.jpg",category:"dress"},{id_number:"3",name:"Крутое платье для выходных",old_price:"60 $",price:"55 $",scr:"images/dress/18.jpg",category:"dress"},{id_number:"4",name:"Крутое платье для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"dress"},{id_number:"5",name:"Крутое платье для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"dress"},{id_number:"6",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"dress"}],[{id_number:"7",name:"Крутая футболка для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"t-short"},{id_number:"8",name:"Крутая футболка для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"t-short"},{id_number:"9",name:"Крутая футболка для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"t-short"}]]}function fill_sell_list(e,i){var s=sell_list.length,n=6*e,t=n-6+1;if(t<s)for(var r=$(".grid_main_item"),a=0;t<=n;t++){$(r[a]);s[t],a++}}function addEventShowAddImage(){var e=$(".main_image_admin_form");e[0]&&this.files[0]&&(e[0].childNodes.length=0,child_img=e[0].childNodes[0],child_img.src=this.files[0])}function addEventShowOthersAddImage(){var e=$(".others_image_admin_form");if(e[0]&&this.files.length)for(var i,s=0;s<this.files.length;s++){e[0].childNodes[s]?(i=e[0].childNodes[s]).src=window.URL.createObjectURL(this.files[s]):((i=document.createElement("img")).src=window.URL.createObjectURL(this.files[s]),i.onload=function(){window.URL.revokeObjectURL(this.src)});var n=$(".others_image_admin_form img");if(6==n.length)break;n[0]?e[0].insertBefore(i,n[0]):e[0].appendChild(i)}}function clear_photo_in_admin_page(){for(var e=$(".others_image_admin_form");e[0].firstChild;)e[0].removeChild(e[0].firstChild)}function slide_active_admin_form(e){e=(e?e.target:this).id;for(var i=$(".admin_form"),s=0;s<=i.length;s++){var n=i[s];n&&n.classList.contains("active_admin_form")&&n.classList.remove("active_admin_form")}"edit_items_page"==e?$(location).attr("href","/edit_items_page"):"/"==e?$(location).attr("href","/"):"/edit_items_page"==location.pathname?$(location).attr("href","/admin"):(e=$("."+e))[0]&&e[0].classList.add("active_admin_form")}function img_edit_selected(e){e=e.target.id;$(location).attr("href","/edit_items_page?param1="+e)}window.onload=function(){for(var e=$(".nav__link"),i=0;i<e.length;i++){e[i].addEventListener("click",toggleToActiveLink)}setClick_Button_User(),$("#input_img")[0]&&$("#input_img")[0].addEventListener("input",addEventShowAddImage,!1),$("#input_other_img")[0]&&$("#input_other_img")[0].addEventListener("input",addEventShowOthersAddImage,!1),$("#clear_photo")[0]&&$("#clear_photo")[0].addEventListener("click",clear_photo_in_admin_page,!1);for(var s=$(".sidebar_admin_li"),n=0;n<s.length;n++)s[n]&&s[n].addEventListener("click",slide_active_admin_form,!1);for(var t=$(".grid_item_img"),n=0;n<=t.length;n++)t[n]&&t[n].addEventListener("click",img_edit_selected,!1)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiLCJoZXJvLmpzIiwiYWRtaW5fcGFnZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlVG9BY3RpdmVMaW5rIiwiZXZlbnQiLCJsaW5rcyIsIiQiLCJpbmRleCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGFyZ2V0IiwiYWRkIiwic2V0Q2xpY2tfQnV0dG9uX1VzZXIiLCJidXR0b25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3dVc2VyTWVudV9TaWduX2luIiwibWVudV91c2VyX2Nsb3NlIiwiSGlkZVVzZXJNZW51X1NpZ25faW4iLCJDaG9pY2VfVXNlcl9NZW51IiwidGVtcCIsInNsaWRlVG9nZ2xlIiwidXNlcl9tZW51X2Nob2ljZXMiLCJ2aXNpYmxlIiwiaGlkZSIsIm1lbnVfcmVnaXN0cmF0aW9uIiwidGVtcF92YWx1ZSIsInZhbHVlIiwibWVudV9zaWduX2luIiwiY3NzIiwic2hvdyIsIlVzZXJfTG9nX2luIiwiQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCIsInZhbCIsIkNyZWF0ZUxpc3RJdGVtcyIsIm1haW5fX2xpc3QiLCJjYXRlZ29yeV9saXN0IiwiaSIsIml0ZW0iLCJjIiwiY2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwibGlzdCIsImFwcGVuZENoaWxkIiwiY2hhbmdlX21haW5fcGhvdG8iLCJoZXJvc2VjdGlvbiIsImF0dHIiLCJpbmRleF9jdXJyZW50X2ltZyIsImxpc3RfbWFpbl9waG90byIsImluZGV4T2YiLCJGaWxsU2VsbExpc3QiLCJzZWxsX2xpc3QiLCJjcmVhdGVfc2VsbF9saXN0IiwiZmlsbF9zZWxsX2xpc3QiLCJmaXhfbWFpbl9tZW51IiwiZWxlbV9tZW51IiwiZWxlbV9zaWRlX2JhciIsImVsZW1faGVybyIsInNwYW5faGVybyIsIndpbmRvdyIsInNjcm9sbCIsInRoaXMiLCJzY3JvbGxUb3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaWRfbnVtYmVyIiwibmFtZSIsIm9sZF9wcmljZSIsInByaWNlIiwic2NyIiwiY2F0ZWdvcnkiLCJwYWdlX251bWJlciIsInNlbGxfY2F0ZWdvcnkiLCJjb3VudHNfaXRlbXMiLCJtYXhfaXRlbXNfb25fcGFnZSIsIm1pbl9pdGVtc19vbl9wYWdlIiwiZ3JpZF9tYWluX2l0ZW1zIiwiYWRkRXZlbnRTaG93QWRkSW1hZ2UiLCJhZG1pbl9pbWdfYmxvY2siLCJmaWxlcyIsImNoaWxkTm9kZXMiLCJjaGlsZF9pbWciLCJzcmMiLCJhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSIsImFkbWluX2ltYWdlc19ibG9jayIsImltZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9ubG9hZCIsInJldm9rZU9iamVjdFVSTCIsImltZ19lbGVtIiwiaW5zZXJ0QmVmb3JlIiwiY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInNsaWRlX2FjdGl2ZV9hZG1pbl9mb3JtIiwiY3VycmVudF9mb3JtIiwiaWQiLCJhZG1pbl9mb3JtcyIsInRlbXBfZm9ybSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJhY3RpdmF0ZWZvcm0iLCJpbWdfZWRpdF9zZWxlY3RlZCIsImlkX3NlbGVjdGVkX2l0ZW0iLCJuYXZfaXRlbSIsImFkbWluX2l0ZW1zX2xpIiwiYWRtaW5faW1nX2VkaXQiXSwibWFwcGluZ3MiOiJBQUNBLFNBQUFBLG1CQUFBQyxHQUlBLElBRkEsSUFBQUMsRUFBQUMsRUFBQSxjQUVBQyxFQUFBLEVBQUFBLEVBQUFGLEVBQUFHLE9BQUFELElBQ0EsR0FBQUYsRUFBQUUsR0FBQUUsVUFBQUMsU0FBQSxxQkFBQSxDQUNBTCxFQUFBRSxHQUFBRSxVQUFBRSxPQUFBLHFCQUNBLE1BSUFQLEVBQUFRLE9BQUFILFVBQUFJLElBQUEscUJBS0EsU0FBQUMscUJBQUFWLEdBSUEsSUFGQSxJQUFBVyxFQUFBVCxFQUFBLGFB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QUEsR0FBQVUsaUJBQUEsUUFBQWlGLDJCQUFBLEdBS0EsSUFGQSxJQUFBYyxFQUFBekcsRUFBQSxxQkFFQWdDLEVBQUEsRUFBQUEsRUFBQXlFLEVBQUF2RyxPQUFBOEIsSUFDQXlFLEVBQUF6RSxJQUNBeUUsRUFBQXpFLEdBQUF0QixpQkFBQSxRQUFBb0YseUJBQUEsR0FNQSxJQUZBLElBQUFZLEVBQUExRyxFQUFBLGtCQUVBZ0MsRUFBQSxFQUFBQSxHQUFBMEUsRUFBQXhHLE9BQUE4QixJQUNBMEUsRUFBQTFFLElBQ0EwRSxFQUFBMUUsR0FBQXRCLGlCQUFBLFFBQUE0RixtQkFBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiB0b2dnbGVUb0FjdGl2ZUxpbmsgKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGxpbmtzID0gJCgnLm5hdl9fbGluaycpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsaW5rcy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBpZiAobGlua3NbaW5kZXhdLmNsYXNzTGlzdC5jb250YWlucygnbmF2X19saW5rLS1hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICBsaW5rc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnbmF2X19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCduYXZfX2xpbmstLWFjdGl2ZScpO1xyXG5cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHNldENsaWNrX0J1dHRvbl9Vc2VyKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGJ1dHRvbnMgPSAkKCcuYnRuX3VzZXInKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYnV0dG9ucy5sZW5ndGg7IGluZGV4KysgKSB7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2J0biA9IGJ1dHRvbnNbaW5kZXhdO1xyXG4gICAgICAgIHRlbXBfYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgU2hvd1VzZXJNZW51X1NpZ25faW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBtZW51X3VzZXJfY2xvc2UgPSAkKCcubWVudV91c2VyX2Nsb3NlJyk7XHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbWVudV91c2VyX2Nsb3NlLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuICAgICAgICBtZW51X3VzZXJfY2xvc2VbaW5kZXhdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgSGlkZVVzZXJNZW51X1NpZ25faW4pO1xyXG4gICAgfVxyXG5cclxuICAgIGJ1dHRvbnMgPSAkKCcudXNlcl9tZW51X2Nob2ljZScpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBidXR0b25zLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdmFyIHRlbXBfYnRuID0gYnV0dG9uc1tpbmRleF07XHJcbiAgICAgICAgdGVtcF9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBDaG9pY2VfVXNlcl9NZW51KTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIFNob3dVc2VyTWVudV9TaWduX2luKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIHRlbXAgPSAkKCcubWVudV91c2VyJyk7XHJcbiAgICB0ZW1wLnNsaWRlVG9nZ2xlKDUpO1xyXG5cclxuICAgIHZhciB1c2VyX21lbnVfY2hvaWNlcyA9ICQoJy51c2VyX21lbnVfY2hvaWNlJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHVzZXJfbWVudV9jaG9pY2VzLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdGVtcCA9IHVzZXJfbWVudV9jaG9pY2VzW2luZGV4XTtcclxuICAgICAgICBpZih0ZW1wLmNsYXNzTGlzdC5jb250YWlucygndXNlcl9tZW51X2Nob2ljZV9hY3RpdmUnKSl7XHJcbiAgICAgICAgICAgIHRlbXAuY2xhc3NMaXN0LnJlbW92ZSgndXNlcl9tZW51X2Nob2ljZV9hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQ2hvaWNlX1VzZXJfTWVudShldmVudCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBIaWRlVXNlck1lbnVfU2lnbl9pbihldmVudCkge1xyXG5cclxuICAgIGlmICgkKCcubWVudV91c2VyX3JlZ2lzdHJhdGlvbicpLnZpc2libGUpe1xyXG4gICAgICAgICQoJy5tZW51X3VzZXJfcmVnaXN0cmF0aW9uJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYoJCgnLm1lbnVfdXNlcl9zaWduX2luJykudmlzaWJsZSl7XHJcbiAgICAgICAgJCgnLm1lbnVfdXNlcl9zaWduX2luJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5tZW51X3VzZXInKS5oaWRlKCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBDaG9pY2VfVXNlcl9NZW51KGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIHRlbXBfdmFsdWUgPSAkKCcuJyArIGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcblxyXG4gICAgaWYoIXRlbXBfdmFsdWVbMF0pe1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZih0ZW1wX3ZhbHVlWzBdLmNsYXNzTGlzdC5jb250YWlucygnaXMtaGlkZGVuJykpe1xyXG4gICAgICAgIHRlbXBfdmFsdWVbMF0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtaGlkZGVuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1lbnVfcmVnaXN0cmF0aW9uID0gJCgnLm1lbnVfdXNlcl9yZWdpc3RyYXRpb24nKTtcclxuICAgIHZhciBtZW51X3NpZ25faW4gPSAkKCcubWVudV91c2VyX3NpZ25faW4nKTtcclxuXHJcbiAgICBpZih0ZW1wX3ZhbHVlWzBdLmNsYXNzTGlzdC5jb250YWlucygnbWVudV9zaWduX2luJykgKXtcclxuXHJcbiAgICAgICAgaWYobWVudV9zaWduX2luWzBdLmNsYXNzTGlzdC5jb250YWlucygnaXMtaGlkZGVuJykpe1xyXG4gICAgICAgICAgICBtZW51X3NpZ25faW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZW51X3NpZ25faW4uY3NzKCdtYXgtaGVpZ2h0JywnMjE1cHgnKTtcclxuICAgICAgICBtZW51X3JlZ2lzdHJhdGlvblswXS5jbGFzc0xpc3QuYWRkKCdpcy1oaWRkZW4nKTtcclxuXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgaWYobWVudV9yZWdpc3RyYXRpb25bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1oaWRkZW4nKSl7XHJcbiAgICAgICAgICAgIG1lbnVfcmVnaXN0cmF0aW9uWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhpZGRlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVudV9yZWdpc3RyYXRpb24uY3NzKCdtYXgtaGVpZ2h0JywnMjk1cHgnKTtcclxuICAgICAgICBtZW51X3NpZ25faW5bMF0uY2xhc3NMaXN0LmFkZCgnaXMtaGlkZGVuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGVtcF92YWx1ZS52aXNpYmxlKXtcclxuICAgICAgICB0ZW1wX3ZhbHVlLmhpZGUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRlbXBfdmFsdWUuc2hvdygpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gVXNlcl9Mb2dfaW4oZXZlbnQpIHtcclxuXHJcbiAgICBDaGVja19Vc2Vyc19JbmZvcm1hdGlvbl9GaWxsKCk7XHJcblxyXG4gICAgdmFyIHRlbXBfdXNlciA9IHtcclxuICAgICAgICBsb2dpbiA6ICQoJy51c2VyX2xvZ2luJykudmFsKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6ICQoJy51c2VyX3Bhc3MnKS52YWwoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvL0Nvbm5lY3RfdXNlcnModGVtcF91c2VyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCgpIHtcclxuXHJcbn1cclxuIiwiXHJcbmZ1bmN0aW9uIENyZWF0ZUxpc3RJdGVtcygpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5zaWRlYmFyLW1lbnUnKTtcclxuICAgIGNhdGVnb3J5X2xpc3QgPSBbJ9CR0LvRg9C30YsnLCAn0KDRg9Cx0LDRiNC60LgnLCAn0J/Qu9Cw0YLRjNGPJywgJ9Cu0LHQutC4JywgJ9CR0YDRjtC60LgnLCAn0JTQttC10LzQv9C10YDRiycsICfQodCy0LjRgtC10YDRiycsICfQmtCw0YDQtNC40LPQsNC90YsnLCAn0JrQvtGE0YLRiycsICfQn9C40LTQttCw0LrQuCcsICfQmtC+0YHRgtGO0LzRiyddO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpPCBtYWluX19saXN0Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgIHZhciBpdGVtID0gbWFpbl9fbGlzdFtpXTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdsaXN0LXN0b2NrcycpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgYyA9MDsgYyA8IGNhdGVnb3J5X2xpc3QubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1tZW51Jyk7XHJcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2xpc3QtLWNob2ljZScpO1xyXG4gICAgICAgICAgICBjaGlsZC5ocmVmID0gJyMnO1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpc3RbY10pO1xyXG5cclxuICAgICAgICAgICAgY2hpbGQuYXBwZW5kQ2hpbGQodGV4dCk7XHJcblxyXG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZV9tYWluX3Bob3RvKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGhlcm9zZWN0aW9uID0gJCgnLmhlcm8taW1nJykuYXR0cihcInNyY1wiKTtcclxuXHJcbiAgICB2YXIgaW5kZXhfY3VycmVudF9pbWcgPSBsaXN0X21haW5fcGhvdG8uaW5kZXhPZihoZXJvc2VjdGlvbik7XHJcblxyXG4gICBpZiAobGlzdF9tYWluX3Bob3RvLmxlbmd0aCA9PSBpbmRleF9jdXJyZW50X2ltZyArIDEpIHtcclxuXHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1swXSk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1tpbmRleF9jdXJyZW50X2ltZyArIDFdKTtcclxuICAgICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZpbGxTZWxsTGlzdCgpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5jb250YWluZXJfZ3JpZCcpO1xyXG4gICAgc2VsbF9saXN0ID0gY3JlYXRlX3NlbGxfbGlzdCgpO1xyXG4gICAgZmlsbF9zZWxsX2xpc3QoMSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXhfbWFpbl9tZW51KCkge1xyXG5cclxuICAgIHZhciBlbGVtX21lbnUgPSAkKCcuaGVhZGVyX21haW5tZW51Jyk7XHJcbiAgICB2YXIgZWxlbV9zaWRlX2JhciA9ICQoJy5zaWRlYmFyJyk7XHJcbiAgICB2YXIgZWxlbV9oZXJvID0gJCgnLmhlcm8nKTtcclxuICAgIHZhciBzcGFuX2hlcm8gPSAkKCcuc3Bhbl9oZXJvJyk7XHJcblxyXG5cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDE4Nykge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUuYWRkQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLmFkZENsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8uYWRkQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLmFkZENsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLnJlbW92ZUNsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8ucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLnJlbW92ZUNsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlX3NlbGxfbGlzdCgpIHtcclxuXHJcbiAgICB2YXIgaXRlbTEgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjFcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvOC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMiA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiMlwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIyMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjE1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNy5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMyA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiM1wiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI2MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTguanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTQgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjRcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiODAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzEwLmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW01ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI1XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjEyMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMTA1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE0LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW02ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI2XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjMwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE2LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW03ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI3XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI4MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTAuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOCA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOFwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMTIwICRcIixcclxuICAgICAgICBwcmljZTogXCIxMDUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTQuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOSA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOVwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTYuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkcmVzcyA9IFtpdGVtMSxpdGVtMixpdGVtMyxpdGVtNCxpdGVtNSxpdGVtNl07XHJcbiAgICB2YXIgdF9zaG9ydCA9IFtpdGVtNyxpdGVtOCxpdGVtOV07XHJcbiAgICByZXR1cm4gW2RyZXNzLHRfc2hvcnRdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsX3NlbGxfbGlzdChwYWdlX251bWJlcixzZWxsX2NhdGVnb3J5KSB7XHJcblxyXG4gICAgdmFyIGNvdW50c19pdGVtcyA9IHNlbGxfbGlzdC5sZW5ndGg7XHJcbiAgICB2YXIgbWF4X2l0ZW1zX29uX3BhZ2UgPSA2ICogcGFnZV9udW1iZXI7XHJcbiAgICB2YXIgbWluX2l0ZW1zX29uX3BhZ2UgPSBtYXhfaXRlbXNfb25fcGFnZSAtIDYgKyAxO1xyXG5cclxuICAgIGlmIChjb3VudHNfaXRlbXMgPiBtaW5faXRlbXNfb25fcGFnZSkge1xyXG5cclxuICAgIHZhciBncmlkX21haW5faXRlbXMgPSAkKCcuZ3JpZF9tYWluX2l0ZW0nKTtcclxuICAgIHZhciBpID0gMDtcclxuXHJcbiAgICBmb3IgKG1pbl9pdGVtc19vbl9wYWdlOyBtaW5faXRlbXNfb25fcGFnZSA8PSBtYXhfaXRlbXNfb25fcGFnZTsgbWluX2l0ZW1zX29uX3BhZ2UrKykge1xyXG5cclxuICAgIHZhciBhcnJfc2VsbF9ibG9jayA9ICQoZ3JpZF9tYWluX2l0ZW1zW2ldKTtcclxuXHJcbiAgICBpZiAoY291bnRzX2l0ZW1zW21pbl9pdGVtc19vbl9wYWdlXSkge1xyXG5cclxuXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpKys7XHJcbiAgICB9XHJcblxyXG4gICAgfVxyXG59IiwiXHJcbmZ1bmN0aW9uIGFkZEV2ZW50U2hvd0FkZEltYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWdfYmxvY2sgPSAkKCcubWFpbl9pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgaWYoYWRtaW5faW1nX2Jsb2NrWzBdICYmIHRoaXMuZmlsZXNbMF0pIHtcclxuXHJcbiAgICAgICAgaWYoYWRtaW5faW1nX2Jsb2NrWzBdLmNoaWxkTm9kZXMubGVuZ3RoID0gMCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkbWluX2ltZ19ibG9ja1swXS5hcHBlbmRDaGlsZChpbWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjaGlsZF9pbWcgPSBhZG1pbl9pbWdfYmxvY2tbMF0uY2hpbGROb2Rlc1swXTtcclxuICAgICAgICAgICAgY2hpbGRfaW1nLnNyYyA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSgpIHtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1hZ2VzX2Jsb2NrID0gJCgnLm90aGVyc19pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgaWYoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdICYmIHRoaXMuZmlsZXMubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDtpKyspe1xyXG5cclxuICAgICAgICAgICAgaWYoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmNoaWxkTm9kZXNbaV0pe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBhZG1pbl9pbWFnZXNfYmxvY2tbMF0uY2hpbGROb2Rlc1tpXTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnNyYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1nX2VsZW0gPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0gaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW1nX2VsZW0ubGVuZ3RoID09IDYpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpbWdfZWxlbVswXSkge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmluc2VydEJlZm9yZShpbWcsaW1nX2VsZW1bMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWFnZXNfYmxvY2sgPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0nKTtcclxuXHJcbiAgICB3aGlsZSAoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBhZG1pbl9pbWFnZXNfYmxvY2tbMF0ucmVtb3ZlQ2hpbGQoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybShldmVudCkge1xyXG5cclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2Zvcm0gPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YXIgY3VycmVudF9mb3JtID0gdGhpcy5pZDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYWRtaW5fZm9ybXMgPSAkKCcuYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGFkbWluX2Zvcm1zLmxlbmd0aDsgaSsrICl7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2Zvcm0gPSBhZG1pbl9mb3Jtc1tpXTtcclxuXHJcbiAgICAgICAgaWYoIXRlbXBfZm9ybSl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGVtcF9mb3JtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlX2FkbWluX2Zvcm0nKSl7XHJcbiAgICAgICAgICAgIHRlbXBfZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGN1cnJlbnRfZm9ybSA9PSAnZWRpdF9pdGVtc19wYWdlJyl7XHJcblxyXG4gICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvZWRpdF9pdGVtc19wYWdlJyk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihjdXJyZW50X2Zvcm0gPT0gJy8nKXtcclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnLycpO1xyXG5cclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT0gJy9lZGl0X2l0ZW1zX3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvYWRtaW4nKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgdmFyIGFjdGl2YXRlZm9ybSA9ICQoJy4nICsgY3VycmVudF9mb3JtKTtcclxuICAgICAgICAgICAgIGlmKGFjdGl2YXRlZm9ybVswXSkge1xyXG4gICAgICAgICAgICAgICAgIGFjdGl2YXRlZm9ybVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGltZ19lZGl0X3NlbGVjdGVkKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGlkX3NlbGVjdGVkX2l0ZW0gPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL2VkaXRfaXRlbXNfcGFnZT9wYXJhbTE9JyArIGlkX3NlbGVjdGVkX2l0ZW0pO1xyXG5cclxufSIsIlxyXG53aW5kb3cub25sb2FkID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBuYXZfaXRlbSA9ICQoJy5uYXZfX2xpbmsnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbmF2X2l0ZW0ubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IG5hdl9pdGVtW2luZGV4XTtcclxuICAgICAgICB0ZW1wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlVG9BY3RpdmVMaW5rKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLypMaXN0ICovXHJcblxyXG4gICAgc2V0Q2xpY2tfQnV0dG9uX1VzZXIoKTtcclxuXHJcbiAgICAvL0FkbWluIHBhZ2UvL1xyXG4gICAgaWYoJCgnI2lucHV0X2ltZycpWzBdKSB7XHJcbiAgICAgICAgJCgnI2lucHV0X2ltZycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYWRkRXZlbnRTaG93QWRkSW1hZ2UsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZigkKCcjaW5wdXRfb3RoZXJfaW1nJylbMF0pIHtcclxuICAgICAgICAkKCcjaW5wdXRfb3RoZXJfaW1nJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCQoJyNjbGVhcl9waG90bycpWzBdKSB7XHJcbiAgICAgICAgJCgnI2NsZWFyX3Bob3RvJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGFkbWluX2l0ZW1zX2xpID0gJCgnLnNpZGViYXJfYWRtaW5fbGknKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgYWRtaW5faXRlbXNfbGkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKGFkbWluX2l0ZW1zX2xpW2ldKSB7XHJcbiAgICAgICAgICAgIGFkbWluX2l0ZW1zX2xpW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybSxmYWxzZSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWdfZWRpdCA9ICQoJy5ncmlkX2l0ZW1faW1nJyk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8PSBhZG1pbl9pbWdfZWRpdC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgaWYoYWRtaW5faW1nX2VkaXRbaV0pIHtcclxuICAgICAgICAgICAgYWRtaW5faW1nX2VkaXRbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbWdfZWRpdF9zZWxlY3RlZCwgZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7XHJcblxyXG4iXX0=
