function toggleToActiveLink(e){for(var i=$(".nav__link"),s=0;s<i.length;s++)if(i[s].classList.contains("nav__link--active")){i[s].classList.remove("nav__link--active");break}e.target.classList.add("nav__link--active")}function setClick_Button_User(e){for(var i=$(".btn_user"),s=0;s<i.length;s++){i[s].addEventListener("click",ShowUserMenu_Sign_in)}for(var t=$(".menu_user_close"),s=0;s<t.length;s++)t[s].addEventListener("click",HideUserMenu_Sign_in);i=$(".user_menu_choice");for(s=0;s<i.length;s++){i[s].addEventListener("click",Choice_User_Menu)}}function ShowUserMenu_Sign_in(e){var i=$(".menu_user");i.slideToggle(5);for(var s=$(".user_menu_choice"),t=0;t<s.length;t++)(i=s[t]).classList.contains("user_menu_choice_active")&&i.classList.remove("user_menu_choice_active");Choice_User_Menu(e)}function HideUserMenu_Sign_in(e){$(".menu_registration").visible?$(".menu_registration").hide():$(".menu_sign_in").visible&&$(".menu_sign_in").hide(),$(".menu_user").hide()}function Choice_User_Menu(e){var i=$("."+e.target.value),s=$(".menu_registration"),t=$(".menu_sign_in");"menu_sign_in"==e.target.value?($(".menu_user_sign_in").css("max-height","210px"),s.hide()):($(".menu_user_registration").css("max-height","250px"),t.hide()),i.visible?i.hide():i.show()}function User_Log_in(e){Check_Users_Information_Fill();$(".user_login").val(),$(".user_pass").val()}function Check_Users_Information_Fill(){}function CreateListItems(){var e=$(".sidebar-menu");category_list=["Блузы","Рубашки","Платья","Юбки","Брюки","Джемперы","Свитеры","Кардиганы","Кофты","Пиджаки","Костюмы"];for(var i=0;i<e.length;i++){var s=e[i];if(!0!==s.classList.contains("list-stocks"))for(var t=0;t<category_list.length;t++){var r=document.createElement("li");r.classList.add("sidebar-menu"),r.classList.add("list--choice"),r.href="#";var n=document.createTextNode(list[t]);r.appendChild(n),s.appendChild(r)}}}function change_main_photo(e){var i=$(".hero-img").attr("src"),i=list_main_photo.indexOf(i);list_main_photo.length==i+1?$(".hero-img").attr("src",list_main_photo[0]):$(".hero-img").attr("src",list_main_photo[i+1])}function FillSellList(){$(".container_grid");sell_list=create_sell_list(),fill_sell_list(1)}function fix_main_menu(){var e=$(".header_mainmenu"),i=$(".sidebar"),s=$(".hero"),t=$(".span_hero");$(window).scroll(function(){187<$(this).scrollTop()?(e.addClass("fix_class_main_menu"),i.addClass("fix_class_side_bar"),s.addClass("fix_class_hero"),t.addClass("margin_top")):(e.removeClass("fix_class_main_menu"),i.removeClass("fix_class_side_bar"),s.removeClass("fix_class_hero"),t.removeClass("margin_top"))})}function create_sell_list(){return[[{id_number:"1",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/8.jpg",category:"dress"},{id_number:"2",name:"Крутое платье для выходных",old_price:"200 $",price:"155 $",scr:"images/dress/17.jpg",category:"dress"},{id_number:"3",name:"Крутое платье для выходных",old_price:"60 $",price:"55 $",scr:"images/dress/18.jpg",category:"dress"},{id_number:"4",name:"Крутое платье для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"dress"},{id_number:"5",name:"Крутое платье для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"dress"},{id_number:"6",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"dress"}],[{id_number:"7",name:"Крутая футболка для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"t-short"},{id_number:"8",name:"Крутая футболка для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"t-short"},{id_number:"9",name:"Крутая футболка для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"t-short"}]]}function fill_sell_list(e,i){var s=sell_list.length,t=6*e,r=t-6+1;if(r<s)for(var n=$(".grid_main_item"),a=0;r<=t;r++){$(n[a]);s[r],a++}}function addEventShowAddImage(){var e=$(".main_image_admin_form");e[0]&&this.files[0]&&(e[0].childNodes.length=0,child_img=e[0].childNodes[0],child_img.src=this.files[0])}function addEventShowOthersAddImage(){var e=$(".others_image_admin_form");if(e[0]&&this.files.length)for(var i,s=0;s<this.files.length;s++){e[0].childNodes[s]?(i=e[0].childNodes[s]).src=window.URL.createObjectURL(this.files[s]):((i=document.createElement("img")).src=window.URL.createObjectURL(this.files[s]),i.onload=function(){window.URL.revokeObjectURL(this.src)});var t=$(".others_image_admin_form img");if(6==t.length)break;t[0]?e[0].insertBefore(i,t[0]):e[0].appendChild(i)}}function clear_photo_in_admin_page(){for(var e=$(".others_image_admin_form");e[0].firstChild;)e[0].removeChild(e[0].firstChild)}function slide_active_admin_form(e){e=(e?e.target:this).id;for(var i=$(".admin_form"),s=0;s<=i.length;s++){var t=i[s];t&&t.classList.contains("active_admin_form")&&t.classList.remove("active_admin_form")}"edit_items_page"==e?$(location).attr("href","/edit_items_page"):"/"==e?$(location).attr("href","/"):"/edit_items_page"==location.pathname?$(location).attr("href","/admin"):(e=$("."+e))[0]&&e[0].classList.add("active_admin_form")}function img_edit_selected(e){e=e.target.id;$(location).attr("href","/edit_items_page?param1="+e)}var sell_list,list_main_photo,user_log_in,category_list;window.onload=function(){for(var e=$(".nav__link"),i=0;i<e.length;i++){e[i].addEventListener("click",toggleToActiveLink)}CreateListItems(),list_main_photo=["images/carusel/img_1.jpg","images/carusel/img_2.jpg","images/carusel/img_3.jpg","images/carusel/img_4.jpg"],setInterval(change_main_photo,2e4),setClick_Button_User(),$("#input_img")[0]&&$("#input_img")[0].addEventListener("input",addEventShowAddImage,!1),$("#input_other_img")[0]&&$("#input_other_img")[0].addEventListener("input",addEventShowOthersAddImage,!1),$("#clear_photo")[0]&&$("#clear_photo")[0].addEventListener("click",clear_photo_in_admin_page,!1);for(var s=$(".sidebar_admin_li"),t=0;t<s.length;t++)s[t]&&s[t].addEventListener("click",slide_active_admin_form,!1);for(var r=$(".grid_item_img"),t=0;t<=r.length;t++)r[t]&&r[t].addEventListener("click",img_edit_selected,!1)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiLCJoZXJvLmpzIiwiYWRtaW5fcGFnZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlVG9BY3RpdmVMaW5rIiwiZXZlbnQiLCJsaW5rcyIsIiQiLCJpbmRleCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGFyZ2V0IiwiYWRkIiwic2V0Q2xpY2tfQnV0dG9uX1VzZXIiLCJidXR0b25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3dVc2VyTWVudV9TaWduX2luIiwibWVudV91c2VyX2Nsb3NlIiwiSGlkZVVzZXJNZW51X1NpZ25faW4iLCJDaG9pY2VfVXNlcl9NZW51IiwidGVtcCIsInNsaWRlVG9nZ2xlIiwidXNlcl9tZW51X2Nob2ljZXMiLCJ2aXNpYmxlIiwiaGlkZSIsInRlbXBfdmFsdWUiLCJ2YWx1ZSIsIm1lbnVfcmVnaXN0cmF0aW9uIiwibWVudV9zaWduX2luIiwiY3NzIiwic2hvdyIsIlVzZXJfTG9nX2luIiwiQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCIsInZhbCIsIkNyZWF0ZUxpc3RJdGVtcyIsIm1haW5fX2xpc3QiLCJjYXRlZ29yeV9saXN0IiwiaSIsIml0ZW0iLCJjIiwiY2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwibGlzdCIsImFwcGVuZENoaWxkIiwiY2hhbmdlX21haW5fcGhvdG8iLCJoZXJvc2VjdGlvbiIsImF0dHIiLCJpbmRleF9jdXJyZW50X2ltZyIsImxpc3RfbWFpbl9waG90byIsImluZGV4T2YiLCJGaWxsU2VsbExpc3QiLCJzZWxsX2xpc3QiLCJjcmVhdGVfc2VsbF9saXN0IiwiZmlsbF9zZWxsX2xpc3QiLCJmaXhfbWFpbl9tZW51IiwiZWxlbV9tZW51IiwiZWxlbV9zaWRlX2JhciIsImVsZW1faGVybyIsInNwYW5faGVybyIsIndpbmRvdyIsInNjcm9sbCIsInRoaXMiLCJzY3JvbGxUb3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaWRfbnVtYmVyIiwibmFtZSIsIm9sZF9wcmljZSIsInByaWNlIiwic2NyIiwiY2F0ZWdvcnkiLCJwYWdlX251bWJlciIsInNlbGxfY2F0ZWdvcnkiLCJjb3VudHNfaXRlbXMiLCJtYXhfaXRlbXNfb25fcGFnZSIsIm1pbl9pdGVtc19vbl9wYWdlIiwiZ3JpZF9tYWluX2l0ZW1zIiwiYWRkRXZlbnRTaG93QWRkSW1hZ2UiLCJhZG1pbl9pbWdfYmxvY2siLCJmaWxlcyIsImNoaWxkTm9kZXMiLCJjaGlsZF9pbWciLCJzcmMiLCJhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSIsImFkbWluX2ltYWdlc19ibG9jayIsImltZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9ubG9hZCIsInJldm9rZU9iamVjdFVSTCIsImltZ19lbGVtIiwiaW5zZXJ0QmVmb3JlIiwiY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInNsaWRlX2FjdGl2ZV9hZG1pbl9mb3JtIiwiY3VycmVudF9mb3JtIiwiaWQiLCJhZG1pbl9mb3JtcyIsInRlbXBfZm9ybSIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJhY3RpdmF0ZWZvcm0iLCJpbWdfZWRpdF9zZWxlY3RlZCIsImlkX3NlbGVjdGVkX2l0ZW0iLCJ1c2VyX2xvZ19pbiIsIm5hdl9pdGVtIiwic2V0SW50ZXJ2YWwiLCJhZG1pbl9pdGVtc19saSIsImFkbWluX2ltZ19lZGl0Il0sIm1hcHBpbmdzIjoiQUFDQSxTQUFBQSxtQkFBQUMsR0FJQSxJQUZBLElBQUFDLEVBQUFDLEVBQUEsY0FFQUMsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxPQUFBRCxJQUNBLEdBQUFGLEVBQUFFLEdBQUFFLFVBQUFDLFNBQUEscUJBQUEsQ0FDQUwsRUFBQUUsR0FBQUUsVUFBQUUsT0FBQSxxQkFDQSxNQUlBUCxFQUFBUSxPQUFBSCxVQUFBSSxJQUFBLHFCQUtBLFNBQUFDLHFCQUFBVixHQUlBLElBRkEsSUFBQVcsRUFBQVQsRUFBQSxhQUVBQyxFQUFBLEVBQUFBLEVBQUFRLEVBQUFQLE9BQUFELElBQUEsQ0FFQVEsRUFBQVIsR0FDQVMsaUJBQUEsUUFBQUMsc0JBSUEsSUFEQSxJQUFBQyxFQUFBWixFQUFBLG9CQUNBQyxFQUFBLEVBQUFBLEVBQUFXLEVBQUFWLE9BQUFELElBQ0FXLEVBQUFYLEdBQUFTLGlCQUFBLFFBQUFHLHNCQUdBSixFQUFBVCxFQUFBLHFCQUVBLElBQUFDLEVBQUEsRUFBQUEsRUFBQVEsRUFBQVAsT0FBQUQsSUFBQSxDQUVBUSxFQUFBUixHQUNBUyxpQkFBQSxRQUFBSSxtQkFLQSxTQUFBSCxxQkFBQWIsR0FFQSxJQUFBaUIsRUFBQWYsRUFBQSxjQUNBZSxFQUFBQyxZQUFBLEdBSUEsSUFGQSxJQUFBQyxFQUFBakIsRUFBQSxxQkFFQUMsRUFBQSxFQUFBQSxFQUFBZ0IsRUFBQWYsT0FBQUQsS0FFQWMsRUFBQUUsRUFBQWhCLElBQ0FFLFVBQUFDLFNBQUEsNEJBQ0FXLEVBQUFaLFVBQUFFLE9BQUEsMkJBSUFTLGlCQUFBaEIsR0FJQSxTQUFBZSxxQkFBQWYsR0FFQUUsRUFBQSxzQkFBQWtCLFFBQ0FsQixFQUFBLHNCQUFBbUIsT0FHQW5CLEVBQUEsaUJBQUFrQixTQUNBbEIsRUFBQSxpQkFBQW1CLE9BR0FuQixFQUFBLGNBQUFtQixPQUlBLFNBQUFMLGlCQUFBaEIsR0FFQSxJQUFBc0IsRUFBQXBCLEVBQUEsSUFBQUYsRUFBQVEsT0FBQWUsT0FDQUMsRUFBQXRCLEVBQUEsc0JBQ0F1QixFQUFBdkIsRUFBQSxpQkFFQSxnQkFBQUYsRUFBQVEsT0FBQWUsT0FFQXJCLEVBQUEsc0JBQUF3QixJQUFBLGFBQUEsU0FDQUYsRUFBQUgsU0FJQW5CLEVBQUEsMkJBQUF3QixJQUFBLGFBQUEsU0FDQUQsRUFBQUosUUFHQUMsRUFBQUYsUUFDQUUsRUFBQUQsT0FHQUMsRUFBQUssT0FLQSxTQUFBQyxZQUFBNUIsR0FFQTZCLCtCQUdBM0IsRUFBQSxlQUFBNEIsTUFDQTVCLEVBQUEsY0FBQTRCLE1BTUEsU0FBQUQsZ0NDaEhBLFNBQUFFLGtCQUVBLElBQUFDLEVBQUE5QixFQUFBLGlCQUNBK0IsY0FBQSxDQUFBLFFBQUEsVUFBQSxTQUFBLE9BQUEsUUFBQSxXQUFBLFVBQUEsWUFBQSxRQUFBLFVBQUEsV0FFQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUYsRUFBQTVCLE9BQUE4QixJQUFBLENBRUEsSUFBQUMsRUFBQUgsRUFBQUUsR0FFQSxJQUFBLElBQUFDLEVBQUE5QixVQUFBQyxTQUFBLGVBSUEsSUFBQSxJQUFBOEIsRUFBQSxFQUFBQSxFQUFBSCxjQUFBN0IsT0FBQWdDLElBQUEsQ0FFQSxJQUFBQyxFQUFBQyxTQUFBQyxjQUFBLE1BQ0FGLEVBQUFoQyxVQUFBSSxJQUFBLGdCQUNBNEIsRUFBQWhDLFVBQUFJLElBQUEsZ0JBQ0E0QixFQUFBRyxLQUFBLElBQ0EsSUFBQUMsRUFBQUgsU0FBQUksZUFBQUMsS0FBQVAsSUFFQUMsRUFBQU8sWUFBQUgsR0FFQU4sRUFBQVMsWUFBQVAsS0FNQSxTQUFBUSxrQkFBQTdDLEdBRUEsSUFBQThDLEVBQUE1QyxFQUFBLGFBQUE2QyxLQUFBLE9BRUFDLEVBQUFDLGdCQUFBQyxRQUFBSixHQUVBRyxnQkFBQTdDLFFBQUE0QyxFQUFBLEVBRUE5QyxFQUFBLGFBQUE2QyxLQUFBLE1BQUFFLGdCQUFBLElBR0EvQyxFQUFBLGFBQUE2QyxLQUFBLE1BQUFFLGdCQUFBRCxFQUFBLElBS0EsU0FBQUcsZUFFQWpELEVBQUEsbUJBQ0FrRCxVQUFBQyxtQkFDQUMsZUFBQSxHQUlBLFNBQUFDLGdCQUVBLElBQUFDLEVBQUF0RCxFQUFBLG9CQUNBdUQsRUFBQXZELEVBQUEsWUFDQXdELEVBQUF4RCxFQUFBLFNBQ0F5RCxFQUFBekQsRUFBQSxjQUdBQSxFQUFBMEQsUUFBQUMsT0FBQSxXQUNBLElBQUEzRCxFQUFBNEQsTUFBQUMsYUFDQVAsRUFBQVEsU0FBQSx1QkFDQVAsRUFBQU8sU0FBQSxzQkFDQU4sRUFBQU0sU0FBQSxrQkFDQUwsRUFBQUssU0FBQSxnQkFFQVIsRUFBQVMsWUFBQSx1QkFDQVIsRUFBQVEsWUFBQSxzQkFDQVAsRUFBQU8sWUFBQSxrQkFDQU4sRUFBQU0sWUFBQSxpQkFLQSxTQUFBWixtQkFxRkEsTUFBQSxDQUZBLENBakZBLENBQ0FhLFVBQUEsSUFDQUMsS0FBQSw2QkFDQUMsVUFBQSxRQUNBQyxNQUFBLFFBQ0FDLElBQUEscUJBQ0FDLFNBQUEsU0FHQSxDQUNBTCxVQUFBLElBQ0FDLEtBQUEsNkJBQ0FDLFVBQUEsUUFDQUMsTUFBQSxRQUNBQyxJQUFBLHNCQUNBQyxTQUFBLFNBR0EsQ0FDQUwsVUFBQSxJQUNBQyxLQUFBLDZCQUNBQyxVQUFBLE9BQ0FDLE1BQUEsT0FDQUMsSUFBQSxzQkFDQUMsU0FBQSxTQUdBLENBQ0FMLFVBQUEsSUFDQUMsS0FBQSw2QkFDQUMsVUFBQSxPQUNBQyxNQUFBLE9BQ0FDLElBQUEsc0JBQ0FDLFNBQUEsU0FHQSxDQUNBTCxVQUFBLElBQ0FDLEtBQUEsNkJBQ0FDLFVBQUEsUUFDQUMsTUFBQSxRQUNBQyxJQUFBLHNCQUNBQyxTQUFBLFNBR0EsQ0FDQUwsVUFBQSxJQUNBQyxLQUFBLDZCQUNBQyxVQUFBLFFBQ0FDLE1BQUEsUUFDQUMsSUFBQSxzQkFDQUMsU0FBQSxVQStCQSxDQTVCQSxDQUNBTCxVQUFBLElBQ0FDLEtBQUEsK0JBQ0FDLFVBQUEsT0FDQUMsTUFBQSxPQUNBQyxJQUFBLHNCQUNBQyxTQUFBLFdBR0EsQ0FDQUwsVUFBQSxJQUNBQyxLQUFBLCtCQUNBQyxVQUFBLFFBQ0FDLE1BQUEsUUFDQUMsSUFBQSxzQkFDQUMsU0FBQSxXQUdBLENBQ0FMLFVBQUEsSUFDQUMsS0FBQSwrQkFDQUMsVUFBQSxRQUNBQyxNQUFBLFFBQ0FDLElBQUEsc0JBQ0FDLFNBQUEsYUFRQSxTQUFBakIsZUFBQWtCLEVBQUFDLEdBRUEsSUFBQUMsRUFBQXRCLFVBQUFoRCxPQUNBdUUsRUFBQSxFQUFBSCxFQUNBSSxFQUFBRCxFQUFBLEVBQUEsRUFFQSxHQUFBQyxFQUFBRixFQUtBLElBSEEsSUFBQUcsRUFBQTNFLEVBQUEsbUJBQ0FnQyxFQUFBLEVBRUEwQyxHQUFBRCxFQUFBQyxJQUFBLENBRUExRSxFQUFBMkUsRUFBQTNDLElBRUF3QyxFQUFBRSxHQVVBMUMsS0M3TEEsU0FBQTRDLHVCQUVBLElBQUFDLEVBQUE3RSxFQUFBLDBCQUVBNkUsRUFBQSxJQUFBakIsS0FBQWtCLE1BQUEsS0FFQUQsRUFBQSxHQUFBRSxXQUFBN0UsT0FBQSxFQVNBOEUsVUFBQUgsRUFBQSxHQUFBRSxXQUFBLEdBQ0FDLFVBQUFDLElBQUFyQixLQUFBa0IsTUFBQSxJQUtBLFNBQUFJLDZCQUVBLElBQUFDLEVBQUFuRixFQUFBLDRCQUVBLEdBQUFtRixFQUFBLElBQUF2QixLQUFBa0IsTUFBQTVFLE9BRUEsSUFBQSxJQVFBa0YsRUFSQXBELEVBQUEsRUFBQUEsRUFBQTRCLEtBQUFrQixNQUFBNUUsT0FBQThCLElBQUEsQ0FFQW1ELEVBQUEsR0FBQUosV0FBQS9DLElBRUFvRCxFQUFBRCxFQUFBLEdBQUFKLFdBQUEvQyxJQUNBaUQsSUFBQXZCLE9BQUEyQixJQUFBQyxnQkFBQTFCLEtBQUFrQixNQUFBOUMsTUFHQW9ELEVBQUFoRCxTQUFBQyxjQUFBLFFBQ0E0QyxJQUFBdkIsT0FBQTJCLElBQUFDLGdCQUFBMUIsS0FBQWtCLE1BQUE5QyxJQUNBb0QsRUFBQUcsT0FBQSxXQUNBN0IsT0FBQTJCLElBQUFHLGdCQUFBNUIsS0FBQXFCLE9BSUEsSUFBQVEsRUFBQXpGLEVBQUEsZ0NBRUEsR0FBQSxHQUFBeUYsRUFBQXZGLE9BQ0EsTUFHQXVGLEVBQUEsR0FDQU4sRUFBQSxHQUFBTyxhQUFBTixFQUFBSyxFQUFBLElBR0FOLEVBQUEsR0FBQXpDLFlBQUEwQyxJQU9BLFNBQUFPLDRCQUlBLElBRkEsSUFBQVIsRUFBQW5GLEVBQUEsNEJBRUFtRixFQUFBLEdBQUFTLFlBQ0FULEVBQUEsR0FBQVUsWUFBQVYsRUFBQSxHQUFBUyxZQUlBLFNBQUFFLHdCQUFBaEcsR0FHQWlHLEdBREFqRyxFQUNBQSxFQUFBUSxPQUdBc0QsTUFIQW9DLEdBUUEsSUFGQSxJQUFBQyxFQUFBakcsRUFBQSxlQUVBZ0MsRUFBQSxFQUFBQSxHQUFBaUUsRUFBQS9GLE9BQUE4QixJQUFBLENBRUEsSUFBQWtFLEVBQUFELEVBQUFqRSxHQUVBa0UsR0FJQUEsRUFBQS9GLFVBQUFDLFNBQUEsc0JBQ0E4RixFQUFBL0YsVUFBQUUsT0FBQSxxQkFPQSxtQkFBQTBGLEVBRUEvRixFQUFBbUcsVUFBQXRELEtBQUEsT0FBQSxvQkFHQSxLQUFBa0QsRUFDQS9GLEVBQUFtRyxVQUFBdEQsS0FBQSxPQUFBLEtBS0Esb0JBQUFzRCxTQUFBQyxTQUNBcEcsRUFBQW1HLFVBQUF0RCxLQUFBLE9BQUEsV0FHQXdELEVBQUFyRyxFQUFBLElBQUErRixJQUNBLElBQ0FNLEVBQUEsR0FBQWxHLFVBQUFJLElBQUEscUJBTUEsU0FBQStGLGtCQUFBeEcsR0FFQXlHLEVBQUF6RyxFQUFBUSxPQUFBMEYsR0FDQWhHLEVBQUFtRyxVQUFBdEQsS0FBQSxPQUFBLDJCQUFBMEQsR0N6SEEsSUFBQXJELFVBRUFILGdCQUVBeUQsWUFFQXpFLGNBRUEyQixPQUFBNkIsT0FBQSxXQUlBLElBRkEsSUFBQWtCLEVBQUF6RyxFQUFBLGNBRUFDLEVBQUEsRUFBQUEsRUFBQXdHLEVBQUF2RyxPQUFBRCxJQUFBLENBRUF3RyxFQUFBeEcsR0FDQVMsaUJBQUEsUUFBQWIsb0JBTUFnQyxrQkFTQWtCLGdCQUFBLENBQUEsMkJBQUEsMkJBQUEsMkJBQUEsNEJBUEEyRCxZQUFBL0Qsa0JBQUEsS0FFQW5DLHVCQVNBUixFQUFBLGNBQUEsSUFDQUEsRUFBQSxjQUFBLEdBQUFVLGlCQUFBLFFBQUFrRSxzQkFBQSxHQUdBNUUsRUFBQSxvQkFBQSxJQUNBQSxFQUFBLG9CQUFBLEdBQUFVLGlCQUFBLFFBQUF3RSw0QkFBQSxHQUdBbEYsRUFBQSxnQkFBQSxJQUNBQSxFQUFBLGdCQUFBLEdBQUFVLGlCQUFBLFFBQUFpRiwyQkFBQSxHQUtBLElBRkEsSUFBQWdCLEVBQUEzRyxFQUFBLHFCQUVBZ0MsRUFBQSxFQUFBQSxFQUFBMkUsRUFBQXpHLE9BQUE4QixJQUNBMkUsRUFBQTNFLElBQ0EyRSxFQUFBM0UsR0FBQXRCLGlCQUFBLFFBQUFvRix5QkFBQSxHQU1BLElBRkEsSUFBQWMsRUFBQTVHLEVBQUEsa0JBRUFnQyxFQUFBLEVBQUFBLEdBQUE0RSxFQUFBMUcsT0FBQThCLElBQ0E0RSxFQUFBNUUsSUFDQTRFLEVBQUE1RSxHQUFBdEIsaUJBQUEsUUFBQTRGLG1CQUFBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIHRvZ2dsZVRvQWN0aXZlTGluayAoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgbGlua3MgPSAkKCcubmF2X19saW5rJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxpbmtzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgIGlmIChsaW5rc1tpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCduYXZfX2xpbmstLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGxpbmtzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCduYXZfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ25hdl9fbGluay0tYWN0aXZlJyk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0Q2xpY2tfQnV0dG9uX1VzZXIoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgYnV0dG9ucyA9ICQoJy5idG5fdXNlcicpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBidXR0b25zLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdmFyIHRlbXBfYnRuID0gYnV0dG9uc1tpbmRleF07XHJcbiAgICAgICAgdGVtcF9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBTaG93VXNlck1lbnVfU2lnbl9pbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1lbnVfdXNlcl9jbG9zZSA9ICQoJy5tZW51X3VzZXJfY2xvc2UnKTtcclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBtZW51X3VzZXJfY2xvc2UubGVuZ3RoOyBpbmRleCsrICkge1xyXG4gICAgICAgIG1lbnVfdXNlcl9jbG9zZVtpbmRleF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBIaWRlVXNlck1lbnVfU2lnbl9pbik7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9ucyA9ICQoJy51c2VyX21lbnVfY2hvaWNlJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGJ1dHRvbnMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcF9idG4gPSBidXR0b25zW2luZGV4XTtcclxuICAgICAgICB0ZW1wX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENob2ljZV9Vc2VyX01lbnUpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gU2hvd1VzZXJNZW51X1NpZ25faW4oZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgdGVtcCA9ICQoJy5tZW51X3VzZXInKTtcclxuICAgIHRlbXAuc2xpZGVUb2dnbGUoNSk7XHJcblxyXG4gICAgdmFyIHVzZXJfbWVudV9jaG9pY2VzID0gJCgnLnVzZXJfbWVudV9jaG9pY2UnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdXNlcl9tZW51X2Nob2ljZXMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB0ZW1wID0gdXNlcl9tZW51X2Nob2ljZXNbaW5kZXhdO1xyXG4gICAgICAgIGlmKHRlbXAuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyX21lbnVfY2hvaWNlX2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgdGVtcC5jbGFzc0xpc3QucmVtb3ZlKCd1c2VyX21lbnVfY2hvaWNlX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDaG9pY2VfVXNlcl9NZW51KGV2ZW50KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEhpZGVVc2VyTWVudV9TaWduX2luKGV2ZW50KSB7XHJcblxyXG4gICAgaWYgKCQoJy5tZW51X3JlZ2lzdHJhdGlvbicpLnZpc2libGUpe1xyXG4gICAgICAgICQoJy5tZW51X3JlZ2lzdHJhdGlvbicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBlbHNlIGlmKCQoJy5tZW51X3NpZ25faW4nKS52aXNpYmxlKXtcclxuICAgICAgICAkKCcubWVudV9zaWduX2luJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5tZW51X3VzZXInKS5oaWRlKCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBDaG9pY2VfVXNlcl9NZW51KGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIHRlbXBfdmFsdWUgPSAkKCcuJyArIGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICB2YXIgbWVudV9yZWdpc3RyYXRpb24gPSAkKCcubWVudV9yZWdpc3RyYXRpb24nKTtcclxuICAgIHZhciBtZW51X3NpZ25faW4gPSAkKCcubWVudV9zaWduX2luJyk7XHJcblxyXG4gICAgaWYoZXZlbnQudGFyZ2V0LnZhbHVlID09ICdtZW51X3NpZ25faW4nKXtcclxuXHJcbiAgICAgICAgJCgnLm1lbnVfdXNlcl9zaWduX2luJykuY3NzKCdtYXgtaGVpZ2h0JywnMjEwcHgnKTtcclxuICAgICAgICBtZW51X3JlZ2lzdHJhdGlvbi5oaWRlKCk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgJCgnLm1lbnVfdXNlcl9yZWdpc3RyYXRpb24nKS5jc3MoJ21heC1oZWlnaHQnLCcyNTBweCcpO1xyXG4gICAgICAgIG1lbnVfc2lnbl9pbi5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGVtcF92YWx1ZS52aXNpYmxlKXtcclxuICAgICAgICB0ZW1wX3ZhbHVlLmhpZGUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRlbXBfdmFsdWUuc2hvdygpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gVXNlcl9Mb2dfaW4oZXZlbnQpIHtcclxuXHJcbiAgICBDaGVja19Vc2Vyc19JbmZvcm1hdGlvbl9GaWxsKCk7XHJcblxyXG4gICAgdmFyIHRlbXBfdXNlciA9IHtcclxuICAgICAgICBsb2dpbiA6ICQoJy51c2VyX2xvZ2luJykudmFsKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6ICQoJy51c2VyX3Bhc3MnKS52YWwoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvL0Nvbm5lY3RfdXNlcnModGVtcF91c2VyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCgpIHtcclxuXHJcbn1cclxuIiwiXHJcbmZ1bmN0aW9uIENyZWF0ZUxpc3RJdGVtcygpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5zaWRlYmFyLW1lbnUnKTtcclxuICAgIGNhdGVnb3J5X2xpc3QgPSBbJ9CR0LvRg9C30YsnLCAn0KDRg9Cx0LDRiNC60LgnLCAn0J/Qu9Cw0YLRjNGPJywgJ9Cu0LHQutC4JywgJ9CR0YDRjtC60LgnLCAn0JTQttC10LzQv9C10YDRiycsICfQodCy0LjRgtC10YDRiycsICfQmtCw0YDQtNC40LPQsNC90YsnLCAn0JrQvtGE0YLRiycsICfQn9C40LTQttCw0LrQuCcsICfQmtC+0YHRgtGO0LzRiyddO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpPCBtYWluX19saXN0Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgIHZhciBpdGVtID0gbWFpbl9fbGlzdFtpXTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdsaXN0LXN0b2NrcycpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgYyA9MDsgYyA8IGNhdGVnb3J5X2xpc3QubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1tZW51Jyk7XHJcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2xpc3QtLWNob2ljZScpO1xyXG4gICAgICAgICAgICBjaGlsZC5ocmVmID0gJyMnO1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpc3RbY10pO1xyXG5cclxuICAgICAgICAgICAgY2hpbGQuYXBwZW5kQ2hpbGQodGV4dCk7XHJcblxyXG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZV9tYWluX3Bob3RvKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGhlcm9zZWN0aW9uID0gJCgnLmhlcm8taW1nJykuYXR0cihcInNyY1wiKTtcclxuXHJcbiAgICB2YXIgaW5kZXhfY3VycmVudF9pbWcgPSBsaXN0X21haW5fcGhvdG8uaW5kZXhPZihoZXJvc2VjdGlvbik7XHJcblxyXG4gICBpZiAobGlzdF9tYWluX3Bob3RvLmxlbmd0aCA9PSBpbmRleF9jdXJyZW50X2ltZyArIDEpIHtcclxuXHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1swXSk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1tpbmRleF9jdXJyZW50X2ltZyArIDFdKTtcclxuICAgICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZpbGxTZWxsTGlzdCgpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5jb250YWluZXJfZ3JpZCcpO1xyXG4gICAgc2VsbF9saXN0ID0gY3JlYXRlX3NlbGxfbGlzdCgpO1xyXG4gICAgZmlsbF9zZWxsX2xpc3QoMSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXhfbWFpbl9tZW51KCkge1xyXG5cclxuICAgIHZhciBlbGVtX21lbnUgPSAkKCcuaGVhZGVyX21haW5tZW51Jyk7XHJcbiAgICB2YXIgZWxlbV9zaWRlX2JhciA9ICQoJy5zaWRlYmFyJyk7XHJcbiAgICB2YXIgZWxlbV9oZXJvID0gJCgnLmhlcm8nKTtcclxuICAgIHZhciBzcGFuX2hlcm8gPSAkKCcuc3Bhbl9oZXJvJyk7XHJcblxyXG5cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDE4Nykge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUuYWRkQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLmFkZENsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8uYWRkQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLmFkZENsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLnJlbW92ZUNsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8ucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLnJlbW92ZUNsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlX3NlbGxfbGlzdCgpIHtcclxuXHJcbiAgICB2YXIgaXRlbTEgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjFcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvOC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMiA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiMlwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIyMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjE1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNy5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMyA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiM1wiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI2MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTguanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTQgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjRcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiODAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzEwLmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW01ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI1XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjEyMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMTA1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE0LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW02ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI2XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjMwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE2LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW03ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI3XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI4MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTAuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOCA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOFwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMTIwICRcIixcclxuICAgICAgICBwcmljZTogXCIxMDUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTQuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOSA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOVwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTYuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkcmVzcyA9IFtpdGVtMSxpdGVtMixpdGVtMyxpdGVtNCxpdGVtNSxpdGVtNl07XHJcbiAgICB2YXIgdF9zaG9ydCA9IFtpdGVtNyxpdGVtOCxpdGVtOV07XHJcbiAgICByZXR1cm4gW2RyZXNzLHRfc2hvcnRdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsX3NlbGxfbGlzdChwYWdlX251bWJlcixzZWxsX2NhdGVnb3J5KSB7XHJcblxyXG4gICAgdmFyIGNvdW50c19pdGVtcyA9IHNlbGxfbGlzdC5sZW5ndGg7XHJcbiAgICB2YXIgbWF4X2l0ZW1zX29uX3BhZ2UgPSA2ICogcGFnZV9udW1iZXI7XHJcbiAgICB2YXIgbWluX2l0ZW1zX29uX3BhZ2UgPSBtYXhfaXRlbXNfb25fcGFnZSAtIDYgKyAxO1xyXG5cclxuICAgIGlmIChjb3VudHNfaXRlbXMgPiBtaW5faXRlbXNfb25fcGFnZSkge1xyXG5cclxuICAgIHZhciBncmlkX21haW5faXRlbXMgPSAkKCcuZ3JpZF9tYWluX2l0ZW0nKTtcclxuICAgIHZhciBpID0gMDtcclxuXHJcbiAgICBmb3IgKG1pbl9pdGVtc19vbl9wYWdlOyBtaW5faXRlbXNfb25fcGFnZSA8PSBtYXhfaXRlbXNfb25fcGFnZTsgbWluX2l0ZW1zX29uX3BhZ2UrKykge1xyXG5cclxuICAgIHZhciBhcnJfc2VsbF9ibG9jayA9ICQoZ3JpZF9tYWluX2l0ZW1zW2ldKTtcclxuXHJcbiAgICBpZiAoY291bnRzX2l0ZW1zW21pbl9pdGVtc19vbl9wYWdlXSkge1xyXG5cclxuXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpKys7XHJcbiAgICB9XHJcblxyXG4gICAgfVxyXG59IiwiXHJcbmZ1bmN0aW9uIGFkZEV2ZW50U2hvd0FkZEltYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWdfYmxvY2sgPSAkKCcubWFpbl9pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgaWYoYWRtaW5faW1nX2Jsb2NrWzBdICYmIHRoaXMuZmlsZXNbMF0pIHtcclxuXHJcbiAgICAgICAgaWYoYWRtaW5faW1nX2Jsb2NrWzBdLmNoaWxkTm9kZXMubGVuZ3RoID0gMCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkbWluX2ltZ19ibG9ja1swXS5hcHBlbmRDaGlsZChpbWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjaGlsZF9pbWcgPSBhZG1pbl9pbWdfYmxvY2tbMF0uY2hpbGROb2Rlc1swXTtcclxuICAgICAgICAgICAgY2hpbGRfaW1nLnNyYyA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRFdmVudFNob3dPdGhlcnNBZGRJbWFnZSgpIHtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1hZ2VzX2Jsb2NrID0gJCgnLm90aGVyc19pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgaWYoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdICYmIHRoaXMuZmlsZXMubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDtpKyspe1xyXG5cclxuICAgICAgICAgICAgaWYoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmNoaWxkTm9kZXNbaV0pe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBhZG1pbl9pbWFnZXNfYmxvY2tbMF0uY2hpbGROb2Rlc1tpXTtcclxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTCh0aGlzLmZpbGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLnNyYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1nX2VsZW0gPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0gaW1nJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW1nX2VsZW0ubGVuZ3RoID09IDYpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpbWdfZWxlbVswXSkge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmluc2VydEJlZm9yZShpbWcsaW1nX2VsZW1bMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWFnZXNfYmxvY2sgPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0nKTtcclxuXHJcbiAgICB3aGlsZSAoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBhZG1pbl9pbWFnZXNfYmxvY2tbMF0ucmVtb3ZlQ2hpbGQoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzbGlkZV9hY3RpdmVfYWRtaW5fZm9ybShldmVudCkge1xyXG5cclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50X2Zvcm0gPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YXIgY3VycmVudF9mb3JtID0gdGhpcy5pZDtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgYWRtaW5fZm9ybXMgPSAkKCcuYWRtaW5fZm9ybScpO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGFkbWluX2Zvcm1zLmxlbmd0aDsgaSsrICl7XHJcblxyXG4gICAgICAgIHZhciB0ZW1wX2Zvcm0gPSBhZG1pbl9mb3Jtc1tpXTtcclxuXHJcbiAgICAgICAgaWYoIXRlbXBfZm9ybSl7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGVtcF9mb3JtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlX2FkbWluX2Zvcm0nKSl7XHJcbiAgICAgICAgICAgIHRlbXBfZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGN1cnJlbnRfZm9ybSA9PSAnZWRpdF9pdGVtc19wYWdlJyl7XHJcblxyXG4gICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvZWRpdF9pdGVtc19wYWdlJyk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihjdXJyZW50X2Zvcm0gPT0gJy8nKXtcclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnLycpO1xyXG5cclxuICAgIH1cclxuICAgIGVsc2V7XHJcblxyXG4gICAgICAgICBpZiAobG9jYXRpb24ucGF0aG5hbWUgPT0gJy9lZGl0X2l0ZW1zX3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnLCcvYWRtaW4nKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgdmFyIGFjdGl2YXRlZm9ybSA9ICQoJy4nICsgY3VycmVudF9mb3JtKTtcclxuICAgICAgICAgICAgIGlmKGFjdGl2YXRlZm9ybVswXSkge1xyXG4gICAgICAgICAgICAgICAgIGFjdGl2YXRlZm9ybVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGltZ19lZGl0X3NlbGVjdGVkKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGlkX3NlbGVjdGVkX2l0ZW0gPSBldmVudC50YXJnZXQuaWQ7XHJcbiAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL2VkaXRfaXRlbXNfcGFnZT9wYXJhbTE9JyArIGlkX3NlbGVjdGVkX2l0ZW0pO1xyXG5cclxufSIsIlxyXG52YXIgc2VsbF9saXN0O1xyXG5cclxudmFyIGxpc3RfbWFpbl9waG90bztcclxuXHJcbnZhciB1c2VyX2xvZ19pbjtcclxuXHJcbnZhciBjYXRlZ29yeV9saXN0O1xyXG5cclxud2luZG93Lm9ubG9hZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICB2YXIgbmF2X2l0ZW0gPSAkKCcubmF2X19saW5rJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IG5hdl9pdGVtLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdmFyIHRlbXAgPSBuYXZfaXRlbVtpbmRleF07XHJcbiAgICAgICAgdGVtcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVRvQWN0aXZlTGluayk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qTGlzdCAqL1xyXG5cclxuICAgIENyZWF0ZUxpc3RJdGVtcygpO1xyXG4gICAgQ3JlYXRlTWFpblBob3RvTGlzdCgpO1xyXG4gICAgc2V0SW50ZXJ2YWwoY2hhbmdlX21haW5fcGhvdG8sMjAwMDApO1xyXG5cclxuICAgIHNldENsaWNrX0J1dHRvbl9Vc2VyKCk7XHJcbiAgICAvKmZpeF9tYWluX21lbnUoKTtcclxuICAgIEZpbGxTZWxsTGlzdCgpOyovXHJcblxyXG4gICAgZnVuY3Rpb24gQ3JlYXRlTWFpblBob3RvTGlzdCgpIHtcclxuICAgICAgICBsaXN0X21haW5fcGhvdG8gPSBbXCJpbWFnZXMvY2FydXNlbC9pbWdfMS5qcGdcIixcImltYWdlcy9jYXJ1c2VsL2ltZ18yLmpwZ1wiLFwiaW1hZ2VzL2NhcnVzZWwvaW1nXzMuanBnXCIsXCJpbWFnZXMvY2FydXNlbC9pbWdfNC5qcGdcIl07XHJcbiAgICB9XHJcblxyXG4gICAgLy9BZG1pbiBwYWdlLy9cclxuICAgIGlmKCQoJyNpbnB1dF9pbWcnKVswXSkge1xyXG4gICAgICAgICQoJyNpbnB1dF9pbWcnKVswXS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFkZEV2ZW50U2hvd0FkZEltYWdlLCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCgnI2lucHV0X290aGVyX2ltZycpWzBdKSB7XHJcbiAgICAgICAgJCgnI2lucHV0X290aGVyX2ltZycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYWRkRXZlbnRTaG93T3RoZXJzQWRkSW1hZ2UsIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZigkKCcjY2xlYXJfcGhvdG8nKVswXSkge1xyXG4gICAgICAgICQoJyNjbGVhcl9waG90bycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xlYXJfcGhvdG9faW5fYWRtaW5fcGFnZSwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhZG1pbl9pdGVtc19saSA9ICQoJy5zaWRlYmFyX2FkbWluX2xpJyk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGFkbWluX2l0ZW1zX2xpLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBpZihhZG1pbl9pdGVtc19saVtpXSkge1xyXG4gICAgICAgICAgICBhZG1pbl9pdGVtc19saVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2xpZGVfYWN0aXZlX2FkbWluX2Zvcm0sZmFsc2UpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgYWRtaW5faW1nX2VkaXQgPSAkKCcuZ3JpZF9pdGVtX2ltZycpO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPD0gYWRtaW5faW1nX2VkaXQubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIGlmKGFkbWluX2ltZ19lZGl0W2ldKSB7XHJcbiAgICAgICAgICAgIGFkbWluX2ltZ19lZGl0W2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW1nX2VkaXRfc2VsZWN0ZWQsIGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIl19
