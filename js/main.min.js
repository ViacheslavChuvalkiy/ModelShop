function toggleToActiveLink(e){for(var i=$(".nav__link"),s=0;s<i.length;s++)if(i[s].classList.contains("nav__link--active")){i[s].classList.remove("nav__link--active");break}e.target.classList.add("nav__link--active")}function setClick_Button_User(e){for(var i=$(".btn_user"),s=0;s<i.length;s++){i[s].addEventListener("click",ShowUserMenu_Sign_in)}for(var n=$(".menu_user_close"),s=0;s<n.length;s++)n[s].addEventListener("click",HideUserMenu_Sign_in);i=$(".user_menu_choice");for(s=0;s<i.length;s++){i[s].addEventListener("click",Choice_User_Menu)}}function ShowUserMenu_Sign_in(e){var i=$(".menu_user");i.slideToggle(5);for(var s=$(".user_menu_choice"),n=0;n<s.length;n++)(i=s[n]).classList.contains("user_menu_choice_active")&&i.classList.remove("user_menu_choice_active");Choice_User_Menu(e)}function HideUserMenu_Sign_in(e){$(".menu_registration").visible?$(".menu_registration").hide():$(".menu_sign_in").visible&&$(".menu_sign_in").hide(),$(".menu_user").hide()}function Choice_User_Menu(e){var i=$("."+e.target.value),s=$(".menu_registration"),n=$(".menu_sign_in");"menu_sign_in"==e.target.value?($(".menu_user_sign_in").css("max-height","210px"),s.hide()):($(".menu_user_registration").css("max-height","250px"),n.hide()),i.visible?i.hide():i.show()}function User_Log_in(e){Check_Users_Information_Fill();$(".user_login").val(),$(".user_pass").val()}function Check_Users_Information_Fill(){}function CreateListItems(){var e=$(".sidebar-menu");category_list=["Блузы","Рубашки","Платья","Юбки","Брюки","Джемперы","Свитеры","Кардиганы","Кофты","Пиджаки","Костюмы"];for(var i=0;i<e.length;i++){var s=e[i];if(!0!==s.classList.contains("list-stocks"))for(var n=0;n<category_list.length;n++){var r=document.createElement("li");r.classList.add("sidebar-menu"),r.classList.add("list--choice"),r.href="#";var a=document.createTextNode(list[n]);r.appendChild(a),s.appendChild(r)}}}function change_main_photo(e){var i=$(".hero-img").attr("src"),i=list_main_photo.indexOf(i);list_main_photo.length==i+1?$(".hero-img").attr("src",list_main_photo[0]):$(".hero-img").attr("src",list_main_photo[i+1])}function FillSellList(){$(".container_grid");sell_list=create_sell_list(),fill_sell_list(1)}function fix_main_menu(){var e=$(".header_mainmenu"),i=$(".sidebar"),s=$(".hero"),n=$(".span_hero");$(window).scroll(function(){187<$(this).scrollTop()?(e.addClass("fix_class_main_menu"),i.addClass("fix_class_side_bar"),s.addClass("fix_class_hero"),n.addClass("margin_top")):(e.removeClass("fix_class_main_menu"),i.removeClass("fix_class_side_bar"),s.removeClass("fix_class_hero"),n.removeClass("margin_top"))})}function create_sell_list(){return[[{id_number:"1",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/8.jpg",category:"dress"},{id_number:"2",name:"Крутое платье для выходных",old_price:"200 $",price:"155 $",scr:"images/dress/17.jpg",category:"dress"},{id_number:"3",name:"Крутое платье для выходных",old_price:"60 $",price:"55 $",scr:"images/dress/18.jpg",category:"dress"},{id_number:"4",name:"Крутое платье для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"dress"},{id_number:"5",name:"Крутое платье для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"dress"},{id_number:"6",name:"Крутое платье для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"dress"}],[{id_number:"7",name:"Крутая футболка для выходных",old_price:"80 $",price:"55 $",scr:"images/dress/10.jpg",category:"t-short"},{id_number:"8",name:"Крутая футболка для выходных",old_price:"120 $",price:"105 $",scr:"images/dress/14.jpg",category:"t-short"},{id_number:"9",name:"Крутая футболка для выходных",old_price:"300 $",price:"255 $",scr:"images/dress/16.jpg",category:"t-short"}]]}function fill_sell_list(e,i){var s=sell_list.length,n=6*e,r=n-6+1;if(r<s)for(var a=$(".grid_main_item"),t=0;r<=n;r++){$(a[t]);s[r],t++}}function addEventShowAddImage(){var e,i=$(".main_image_admin_form");i[0]&&this.files[0]&&((e=document.createElement("img")).src=window.URL.createObjectURL(this.files[0]),e.onload=function(){window.URL.revokeObjectURL(this.src)},i[0].appendChild(e))}function addEventShowOthersAddImage(){var e=$(".others_image_admin_form");if(e[0]&&this.files.length)for(var i=0;i<this.files.length;i++){var s=document.createElement("img");s.src=window.URL.createObjectURL(this.files[i]),s.onload=function(){window.URL.revokeObjectURL(this.src)};var n=$(".others_image_admin_form img");if(6==n.length)break;n[0]?e[0].insertBefore(s,n[0]):e[0].appendChild(s)}}function clear_photo_in_admin_page(){for(var e=$(".others_image_admin_form");e[0].firstChild;)e[0].removeChild(e[0].firstChild)}function addSideBarAdmin(){var e=$(".sidebar_admin_ul");options_list=[{name:"Добавить товар",form:"add_sale_items_form"},{name:"Редактировать товар",form:"edit_items_page"},{name:"Настроить основною страницу",form:"add_sale_items_form"},{name:"Настроить основную страницу лукбук",form:"add_sale_items_form"},{name:"Загрузить фото на сервер",form:"add_item_photos_form"},{name:"Основная страница",form:"/"}];for(var i=e[0],s=0;s<options_list.length;s++){var n=document.createElement("li");n.classList.add("sidebar_admin_li"),n.href=options_list[s].form;var r=document.createTextNode(options_list[s].name);n.appendChild(r),i.appendChild(n)}}function slide_active_admin_form(e){for(var e=e.target.href,i=$(".admin_form"),s=0;s<=i.length;s++){var n=i[s];n&&n.classList.contains("active_admin_form")&&n.classList.remove("active_admin_form")}"edit_items_page"==e?$(location).attr("href","/edit_items_page"):"/"==e?$(location).attr("href","/"):$("."+e)[0].classList.add("active_admin_form")}var sell_list,list_main_photo,user_log_in,category_list;window.onload=function(){for(var e=$(".nav__link"),i=0;i<e.length;i++){e[i].addEventListener("click",toggleToActiveLink)}CreateListItems(),list_main_photo=["images/carusel/img_1.jpg","images/carusel/img_2.jpg","images/carusel/img_3.jpg","images/carusel/img_4.jpg"],addSideBarAdmin(),setInterval(change_main_photo,2e4),setClick_Button_User(),$("#input_img")[0].addEventListener("input",addEventShowAddImage,!1),$("#input_other_img")[0].addEventListener("input",addEventShowOthersAddImage,!1),$("#clear_photo")[0].addEventListener("click",clear_photo_in_admin_page,!1);for(var s=$(".sidebar_admin_li"),n=0;n<=s.length;n++)s[n].addEventListener("click",slide_active_admin_form)};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiLCJoZXJvLmpzIiwiYWRtaW5fcGFnZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsidG9nZ2xlVG9BY3RpdmVMaW5rIiwiZXZlbnQiLCJsaW5rcyIsIiQiLCJpbmRleCIsImxlbmd0aCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwicmVtb3ZlIiwidGFyZ2V0IiwiYWRkIiwic2V0Q2xpY2tfQnV0dG9uX1VzZXIiLCJidXR0b25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3dVc2VyTWVudV9TaWduX2luIiwibWVudV91c2VyX2Nsb3NlIiwiSGlkZVVzZXJNZW51X1NpZ25faW4iLCJDaG9pY2VfVXNlcl9NZW51IiwidGVtcCIsInNsaWRlVG9nZ2xlIiwidXNlcl9tZW51X2Nob2ljZXMiLCJ2aXNpYmxlIiwiaGlkZSIsInRlbXBfdmFsdWUiLCJ2YWx1ZSIsIm1lbnVfcmVnaXN0cmF0aW9uIiwibWVudV9zaWduX2luIiwiY3NzIiwic2hvdyIsIlVzZXJfTG9nX2luIiwiQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCIsInZhbCIsIkNyZWF0ZUxpc3RJdGVtcyIsIm1haW5fX2xpc3QiLCJjYXRlZ29yeV9saXN0IiwiaSIsIml0ZW0iLCJjIiwiY2hpbGQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJocmVmIiwidGV4dCIsImNyZWF0ZVRleHROb2RlIiwibGlzdCIsImFwcGVuZENoaWxkIiwiY2hhbmdlX21haW5fcGhvdG8iLCJoZXJvc2VjdGlvbiIsImF0dHIiLCJpbmRleF9jdXJyZW50X2ltZyIsImxpc3RfbWFpbl9waG90byIsImluZGV4T2YiLCJGaWxsU2VsbExpc3QiLCJzZWxsX2xpc3QiLCJjcmVhdGVfc2VsbF9saXN0IiwiZmlsbF9zZWxsX2xpc3QiLCJmaXhfbWFpbl9tZW51IiwiZWxlbV9tZW51IiwiZWxlbV9zaWRlX2JhciIsImVsZW1faGVybyIsInNwYW5faGVybyIsIndpbmRvdyIsInNjcm9sbCIsInRoaXMiLCJzY3JvbGxUb3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaWRfbnVtYmVyIiwibmFtZSIsIm9sZF9wcmljZSIsInByaWNlIiwic2NyIiwiY2F0ZWdvcnkiLCJwYWdlX251bWJlciIsInNlbGxfY2F0ZWdvcnkiLCJjb3VudHNfaXRlbXMiLCJtYXhfaXRlbXNfb25fcGFnZSIsIm1pbl9pdGVtc19vbl9wYWdlIiwiZ3JpZF9tYWluX2l0ZW1zIiwiYWRkRXZlbnRTaG93QWRkSW1hZ2UiLCJpbWciLCJhZG1pbl9pbWdfYmxvY2siLCJmaWxlcyIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm9ubG9hZCIsInJldm9rZU9iamVjdFVSTCIsImFkZEV2ZW50U2hvd090aGVyc0FkZEltYWdlIiwiYWRtaW5faW1hZ2VzX2Jsb2NrIiwiaW1nX2VsZW0iLCJpbnNlcnRCZWZvcmUiLCJjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiYWRkU2lkZUJhckFkbWluIiwib3B0aW9uc19saXN0IiwiZm9ybSIsInNsaWRlX2FjdGl2ZV9hZG1pbl9mb3JtIiwiY3VycmVudF9mb3JtIiwiYWRtaW5fZm9ybXMiLCJ0ZW1wX2Zvcm0iLCJsb2NhdGlvbiIsInVzZXJfbG9nX2luIiwibmF2X2l0ZW0iLCJzZXRJbnRlcnZhbCIsImFkbWluX2l0ZW1zX2xpIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFBQSxtQkFBQUMsR0FJQSxJQUZBLElBQUFDLEVBQUFDLEVBQUEsY0FFQUMsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxPQUFBRCxJQUNBLEdBQUFGLEVBQUFFLEdBQUFFLFVBQUFDLFNBQUEscUJBQUEsQ0FDQUwsRUFBQUUsR0FBQUUsVUFBQUUsT0FBQSxxQkFDQSxNQUlBUCxFQUFBUSxPQUFBSCxVQUFBSSxJQUFBLHFCQUtBLFNBQUFDLHFCQUFBVixHQUlBLElBRkEsSUFBQVcsRUFBQVQsRUFBQSxhQUVBQyxFQUFBLEVBQUFBLEVBQUFRLEVBQUFQLE9BQUFELElBQUEsQ0FFQVEs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QkFBQSxHQUNBNUUsRUFBQSxvQkFBQSxHQUFBVSxpQkFBQSxRQUFBMkUsNEJBQUEsR0FDQXJGLEVBQUEsZ0JBQUEsR0FBQVUsaUJBQUEsUUFBQStFLDJCQUFBLEdBSUEsSUFGQSxJQUFBYyxFQUFBdkcsRUFBQSxxQkFFQWdDLEVBQUEsRUFBQUEsR0FBQXVFLEVBQUFyRyxPQUFBOEIsSUFDQXVFLEVBQUF2RSxHQUFBdEIsaUJBQUEsUUFBQXFGIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIHRvZ2dsZVRvQWN0aXZlTGluayAoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgbGlua3MgPSAkKCcubmF2X19saW5rJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxpbmtzLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgIGlmIChsaW5rc1tpbmRleF0uY2xhc3NMaXN0LmNvbnRhaW5zKCduYXZfX2xpbmstLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIGxpbmtzW2luZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCduYXZfX2xpbmstLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ25hdl9fbGluay0tYWN0aXZlJyk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc2V0Q2xpY2tfQnV0dG9uX1VzZXIoZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgYnV0dG9ucyA9ICQoJy5idG5fdXNlcicpO1xyXG5cclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBidXR0b25zLmxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHJcbiAgICAgICAgdmFyIHRlbXBfYnRuID0gYnV0dG9uc1tpbmRleF07XHJcbiAgICAgICAgdGVtcF9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBTaG93VXNlck1lbnVfU2lnbl9pbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1lbnVfdXNlcl9jbG9zZSA9ICQoJy5tZW51X3VzZXJfY2xvc2UnKTtcclxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBtZW51X3VzZXJfY2xvc2UubGVuZ3RoOyBpbmRleCsrICkge1xyXG4gICAgICAgIG1lbnVfdXNlcl9jbG9zZVtpbmRleF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBIaWRlVXNlck1lbnVfU2lnbl9pbik7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9ucyA9ICQoJy51c2VyX21lbnVfY2hvaWNlJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGJ1dHRvbnMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcF9idG4gPSBidXR0b25zW2luZGV4XTtcclxuICAgICAgICB0ZW1wX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENob2ljZV9Vc2VyX01lbnUpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gU2hvd1VzZXJNZW51X1NpZ25faW4oZXZlbnQpIHtcclxuXHJcbiAgICB2YXIgdGVtcCA9ICQoJy5tZW51X3VzZXInKTtcclxuICAgIHRlbXAuc2xpZGVUb2dnbGUoNSk7XHJcblxyXG4gICAgdmFyIHVzZXJfbWVudV9jaG9pY2VzID0gJCgnLnVzZXJfbWVudV9jaG9pY2UnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdXNlcl9tZW51X2Nob2ljZXMubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB0ZW1wID0gdXNlcl9tZW51X2Nob2ljZXNbaW5kZXhdO1xyXG4gICAgICAgIGlmKHRlbXAuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyX21lbnVfY2hvaWNlX2FjdGl2ZScpKXtcclxuICAgICAgICAgICAgdGVtcC5jbGFzc0xpc3QucmVtb3ZlKCd1c2VyX21lbnVfY2hvaWNlX2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDaG9pY2VfVXNlcl9NZW51KGV2ZW50KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEhpZGVVc2VyTWVudV9TaWduX2luKGV2ZW50KSB7XHJcblxyXG4gICAgaWYgKCQoJy5tZW51X3JlZ2lzdHJhdGlvbicpLnZpc2libGUpe1xyXG4gICAgICAgICQoJy5tZW51X3JlZ2lzdHJhdGlvbicpLmhpZGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBlbHNlIGlmKCQoJy5tZW51X3NpZ25faW4nKS52aXNpYmxlKXtcclxuICAgICAgICAkKCcubWVudV9zaWduX2luJykuaGlkZSgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5tZW51X3VzZXInKS5oaWRlKCk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBDaG9pY2VfVXNlcl9NZW51KGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIHRlbXBfdmFsdWUgPSAkKCcuJyArIGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICB2YXIgbWVudV9yZWdpc3RyYXRpb24gPSAkKCcubWVudV9yZWdpc3RyYXRpb24nKTtcclxuICAgIHZhciBtZW51X3NpZ25faW4gPSAkKCcubWVudV9zaWduX2luJyk7XHJcblxyXG4gICAgaWYoZXZlbnQudGFyZ2V0LnZhbHVlID09ICdtZW51X3NpZ25faW4nKXtcclxuXHJcbiAgICAgICAgJCgnLm1lbnVfdXNlcl9zaWduX2luJykuY3NzKCdtYXgtaGVpZ2h0JywnMjEwcHgnKTtcclxuICAgICAgICBtZW51X3JlZ2lzdHJhdGlvbi5oaWRlKCk7XHJcblxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgJCgnLm1lbnVfdXNlcl9yZWdpc3RyYXRpb24nKS5jc3MoJ21heC1oZWlnaHQnLCcyNTBweCcpO1xyXG4gICAgICAgIG1lbnVfc2lnbl9pbi5oaWRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGVtcF92YWx1ZS52aXNpYmxlKXtcclxuICAgICAgICB0ZW1wX3ZhbHVlLmhpZGUoKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRlbXBfdmFsdWUuc2hvdygpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gVXNlcl9Mb2dfaW4oZXZlbnQpIHtcclxuXHJcbiAgICBDaGVja19Vc2Vyc19JbmZvcm1hdGlvbl9GaWxsKCk7XHJcblxyXG4gICAgdmFyIHRlbXBfdXNlciA9IHtcclxuICAgICAgICBsb2dpbiA6ICQoJy51c2VyX2xvZ2luJykudmFsKCksXHJcbiAgICAgICAgcGFzc3dvcmQ6ICQoJy51c2VyX3Bhc3MnKS52YWwoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvL0Nvbm5lY3RfdXNlcnModGVtcF91c2VyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2hlY2tfVXNlcnNfSW5mb3JtYXRpb25fRmlsbCgpIHtcclxuXHJcbn1cclxuIiwiXHJcbmZ1bmN0aW9uIENyZWF0ZUxpc3RJdGVtcygpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5zaWRlYmFyLW1lbnUnKTtcclxuICAgIGNhdGVnb3J5X2xpc3QgPSBbJ9CR0LvRg9C30YsnLCAn0KDRg9Cx0LDRiNC60LgnLCAn0J/Qu9Cw0YLRjNGPJywgJ9Cu0LHQutC4JywgJ9CR0YDRjtC60LgnLCAn0JTQttC10LzQv9C10YDRiycsICfQodCy0LjRgtC10YDRiycsICfQmtCw0YDQtNC40LPQsNC90YsnLCAn0JrQvtGE0YLRiycsICfQn9C40LTQttCw0LrQuCcsICfQmtC+0YHRgtGO0LzRiyddO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpPCBtYWluX19saXN0Lmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgIHZhciBpdGVtID0gbWFpbl9fbGlzdFtpXTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdsaXN0LXN0b2NrcycpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgYyA9MDsgYyA8IGNhdGVnb3J5X2xpc3QubGVuZ3RoOyBjKyspIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1tZW51Jyk7XHJcbiAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoJ2xpc3QtLWNob2ljZScpO1xyXG4gICAgICAgICAgICBjaGlsZC5ocmVmID0gJyMnO1xyXG4gICAgICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxpc3RbY10pO1xyXG5cclxuICAgICAgICAgICAgY2hpbGQuYXBwZW5kQ2hpbGQodGV4dCk7XHJcblxyXG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGNoaWxkKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoYW5nZV9tYWluX3Bob3RvKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGhlcm9zZWN0aW9uID0gJCgnLmhlcm8taW1nJykuYXR0cihcInNyY1wiKTtcclxuXHJcbiAgICB2YXIgaW5kZXhfY3VycmVudF9pbWcgPSBsaXN0X21haW5fcGhvdG8uaW5kZXhPZihoZXJvc2VjdGlvbik7XHJcblxyXG4gICBpZiAobGlzdF9tYWluX3Bob3RvLmxlbmd0aCA9PSBpbmRleF9jdXJyZW50X2ltZyArIDEpIHtcclxuXHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1swXSk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgICAkKCcuaGVyby1pbWcnKS5hdHRyKFwic3JjXCIsIGxpc3RfbWFpbl9waG90b1tpbmRleF9jdXJyZW50X2ltZyArIDFdKTtcclxuICAgICAgIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZpbGxTZWxsTGlzdCgpIHtcclxuXHJcbiAgICB2YXIgbWFpbl9fbGlzdCA9ICQoJy5jb250YWluZXJfZ3JpZCcpO1xyXG4gICAgc2VsbF9saXN0ID0gY3JlYXRlX3NlbGxfbGlzdCgpO1xyXG4gICAgZmlsbF9zZWxsX2xpc3QoMSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXhfbWFpbl9tZW51KCkge1xyXG5cclxuICAgIHZhciBlbGVtX21lbnUgPSAkKCcuaGVhZGVyX21haW5tZW51Jyk7XHJcbiAgICB2YXIgZWxlbV9zaWRlX2JhciA9ICQoJy5zaWRlYmFyJyk7XHJcbiAgICB2YXIgZWxlbV9oZXJvID0gJCgnLmhlcm8nKTtcclxuICAgIHZhciBzcGFuX2hlcm8gPSAkKCcuc3Bhbl9oZXJvJyk7XHJcblxyXG5cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDE4Nykge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUuYWRkQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLmFkZENsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8uYWRkQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLmFkZENsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtX21lbnUucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfbWFpbl9tZW51XCIpO1xyXG4gICAgICAgICAgICBlbGVtX3NpZGVfYmFyLnJlbW92ZUNsYXNzKFwiZml4X2NsYXNzX3NpZGVfYmFyXCIpO1xyXG4gICAgICAgICAgICBlbGVtX2hlcm8ucmVtb3ZlQ2xhc3MoXCJmaXhfY2xhc3NfaGVyb1wiKTtcclxuICAgICAgICAgICAgc3Bhbl9oZXJvLnJlbW92ZUNsYXNzKFwibWFyZ2luX3RvcFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlX3NlbGxfbGlzdCgpIHtcclxuXHJcbiAgICB2YXIgaXRlbTEgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjFcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvOC5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMiA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiMlwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCIyMDAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjE1NSAkXCIsXHJcbiAgICAgICAgc2NyOiBcImltYWdlcy9kcmVzcy8xNy5qcGdcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJkcmVzc1wiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtMyA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiM1wiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQvtC1INC/0LvQsNGC0YzQtSDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI2MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTguanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiZHJlc3NcIlxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgaXRlbTQgPSB7XHJcbiAgICAgICAgaWRfbnVtYmVyOiBcIjRcIixcclxuICAgICAgICBuYW1lOiBcItCa0YDRg9GC0L7QtSDQv9C70LDRgtGM0LUg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiODAgJFwiLFxyXG4gICAgICAgIHByaWNlOiBcIjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzEwLmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW01ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI1XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjEyMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMTA1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE0LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW02ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI2XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtC+0LUg0L/Qu9Cw0YLRjNC1INC00LvRjyDQstGL0YXQvtC00L3Ri9GFXCIsXHJcbiAgICAgICAgb2xkX3ByaWNlOiBcIjMwMCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiMjU1ICRcIixcclxuICAgICAgICBzY3I6IFwiaW1hZ2VzL2RyZXNzLzE2LmpwZ1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImRyZXNzXCJcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGl0ZW03ID0ge1xyXG4gICAgICAgIGlkX251bWJlcjogXCI3XCIsXHJcbiAgICAgICAgbmFtZTogXCLQmtGA0YPRgtCw0Y8g0YTRg9GC0LHQvtC70LrQsCDQtNC70Y8g0LLRi9GF0L7QtNC90YvRhVwiLFxyXG4gICAgICAgIG9sZF9wcmljZTogXCI4MCAkXCIsXHJcbiAgICAgICAgcHJpY2U6IFwiNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTAuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOCA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOFwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMTIwICRcIixcclxuICAgICAgICBwcmljZTogXCIxMDUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTQuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpdGVtOSA9IHtcclxuICAgICAgICBpZF9udW1iZXI6IFwiOVwiLFxyXG4gICAgICAgIG5hbWU6IFwi0JrRgNGD0YLQsNGPINGE0YPRgtCx0L7Qu9C60LAg0LTQu9GPINCy0YvRhdC+0LTQvdGL0YVcIixcclxuICAgICAgICBvbGRfcHJpY2U6IFwiMzAwICRcIixcclxuICAgICAgICBwcmljZTogXCIyNTUgJFwiLFxyXG4gICAgICAgIHNjcjogXCJpbWFnZXMvZHJlc3MvMTYuanBnXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidC1zaG9ydFwiXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBkcmVzcyA9IFtpdGVtMSxpdGVtMixpdGVtMyxpdGVtNCxpdGVtNSxpdGVtNl07XHJcbiAgICB2YXIgdF9zaG9ydCA9IFtpdGVtNyxpdGVtOCxpdGVtOV07XHJcbiAgICByZXR1cm4gW2RyZXNzLHRfc2hvcnRdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsX3NlbGxfbGlzdChwYWdlX251bWJlcixzZWxsX2NhdGVnb3J5KSB7XHJcblxyXG4gICAgdmFyIGNvdW50c19pdGVtcyA9IHNlbGxfbGlzdC5sZW5ndGg7XHJcbiAgICB2YXIgbWF4X2l0ZW1zX29uX3BhZ2UgPSA2ICogcGFnZV9udW1iZXI7XHJcbiAgICB2YXIgbWluX2l0ZW1zX29uX3BhZ2UgPSBtYXhfaXRlbXNfb25fcGFnZSAtIDYgKyAxO1xyXG5cclxuICAgIGlmIChjb3VudHNfaXRlbXMgPiBtaW5faXRlbXNfb25fcGFnZSkge1xyXG5cclxuICAgIHZhciBncmlkX21haW5faXRlbXMgPSAkKCcuZ3JpZF9tYWluX2l0ZW0nKTtcclxuICAgIHZhciBpID0gMDtcclxuXHJcbiAgICBmb3IgKG1pbl9pdGVtc19vbl9wYWdlOyBtaW5faXRlbXNfb25fcGFnZSA8PSBtYXhfaXRlbXNfb25fcGFnZTsgbWluX2l0ZW1zX29uX3BhZ2UrKykge1xyXG5cclxuICAgIHZhciBhcnJfc2VsbF9ibG9jayA9ICQoZ3JpZF9tYWluX2l0ZW1zW2ldKTtcclxuXHJcbiAgICBpZiAoY291bnRzX2l0ZW1zW21pbl9pdGVtc19vbl9wYWdlXSkge1xyXG5cclxuXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpKys7XHJcbiAgICB9XHJcblxyXG4gICAgfVxyXG59IiwiXHJcbmZ1bmN0aW9uIGFkZEV2ZW50U2hvd0FkZEltYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWdfYmxvY2sgPSAkKCcubWFpbl9pbWFnZV9hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgaWYoYWRtaW5faW1nX2Jsb2NrWzBdICYmIHRoaXMuZmlsZXNbMF0pIHtcclxuXHJcbiAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhZG1pbl9pbWdfYmxvY2tbMF0uYXBwZW5kQ2hpbGQoaW1nKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEV2ZW50U2hvd090aGVyc0FkZEltYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWFnZXNfYmxvY2sgPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0nKTtcclxuXHJcbiAgICBpZihhZG1pbl9pbWFnZXNfYmxvY2tbMF0gJiYgdGhpcy5maWxlcy5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuZmlsZXMubGVuZ3RoO2krKyl7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgaW1nLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGltZ19lbGVtID0gJCgnLm90aGVyc19pbWFnZV9hZG1pbl9mb3JtIGltZycpXHJcblxyXG4gICAgICAgICAgICBpZiAoaW1nX2VsZW0ubGVuZ3RoID09IDYpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpbWdfZWxlbVswXSkge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmluc2VydEJlZm9yZShpbWcsaW1nX2VsZW1bMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhcl9waG90b19pbl9hZG1pbl9wYWdlKCkge1xyXG5cclxuICAgIHZhciBhZG1pbl9pbWFnZXNfYmxvY2sgPSAkKCcub3RoZXJzX2ltYWdlX2FkbWluX2Zvcm0nKTtcclxuXHJcbiAgICB3aGlsZSAoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgICBhZG1pbl9pbWFnZXNfYmxvY2tbMF0ucmVtb3ZlQ2hpbGQoYWRtaW5faW1hZ2VzX2Jsb2NrWzBdLmZpcnN0Q2hpbGQpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTaWRlQmFyQWRtaW4oKSB7XHJcblxyXG4gICAgdmFyIG1haW5fX2xpc3QgPSAkKCcuc2lkZWJhcl9hZG1pbl91bCcpO1xyXG4gICAgb3B0aW9uc19saXN0ID0gW3tuYW1lOiAn0JTQvtCx0LDQstC40YLRjCDRgtC+0LLQsNGAJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogJ2FkZF9zYWxlX2l0ZW1zX2Zvcm0nfSxcclxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ9Cg0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINGC0L7QstCw0YAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiAnZWRpdF9pdGVtc19wYWdlJ30sXHJcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICfQndCw0YHRgtGA0L7QuNGC0Ywg0L7RgdC90L7QstC90L7RjiDRgdGC0YDQsNC90LjRhtGDJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogJ2FkZF9zYWxlX2l0ZW1zX2Zvcm0nfSxcclxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ9Cd0LDRgdGC0YDQvtC40YLRjCDQvtGB0L3QvtCy0L3Rg9GOINGB0YLRgNCw0L3QuNGG0YMg0LvRg9C60LHRg9C6JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogJ2FkZF9zYWxlX2l0ZW1zX2Zvcm0nfSxcclxuICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ9CX0LDQs9GA0YPQt9C40YLRjCDRhNC+0YLQviDQvdCwINGB0LXRgNCy0LXRgCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm06ICdhZGRfaXRlbV9waG90b3NfZm9ybSd9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAn0J7RgdC90L7QstC90LDRjyDRgdGC0YDQsNC90LjRhtCwJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybTogJy8nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICB2YXIgaXRlbSA9IG1haW5fX2xpc3RbMF07XHJcblxyXG4gICAgICAgIC8vaXRlbS5lbXB0eSgpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IG9wdGlvbnNfbGlzdC5sZW5ndGg7IGMrKykge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QuYWRkKCdzaWRlYmFyX2FkbWluX2xpJyk7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5ocmVmID0gb3B0aW9uc19saXN0W2NdLmZvcm07XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUob3B0aW9uc19saXN0W2NdLm5hbWUpO1xyXG4gICAgICAgICAgICBjaGlsZC5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWRlX2FjdGl2ZV9hZG1pbl9mb3JtKGV2ZW50KSB7XHJcblxyXG4gICAgdmFyIGN1cnJlbnRfZm9ybSA9IGV2ZW50LnRhcmdldC5ocmVmO1xyXG5cclxuICAgIHZhciBhZG1pbl9mb3JtcyA9ICQoJy5hZG1pbl9mb3JtJyk7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gYWRtaW5fZm9ybXMubGVuZ3RoOyBpKysgKXtcclxuXHJcbiAgICAgICAgdmFyIHRlbXBfZm9ybSA9IGFkbWluX2Zvcm1zW2ldO1xyXG5cclxuICAgICAgICBpZighdGVtcF9mb3JtKXtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0ZW1wX2Zvcm0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmVfYWRtaW5fZm9ybScpKXtcclxuICAgICAgICAgICAgdGVtcF9mb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZV9hZG1pbl9mb3JtJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYoY3VycmVudF9mb3JtID09ICdlZGl0X2l0ZW1zX3BhZ2UnKXtcclxuXHJcbiAgICAgICAgLy92YXIgVVJMX3BhZ2UgPSBldmVudC50YXJnZXQuYmFzZVVSSSArICcvZWRpdF9wYWdlJztcclxuICAgICAgICAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJywnL2VkaXRfaXRlbXNfcGFnZScpO1xyXG5cclxuICAgIH1cclxuICAgIGVsc2UgaWYoY3VycmVudF9mb3JtID09ICcvJyl7XHJcbiAgICAgICAgJChsb2NhdGlvbikuYXR0cignaHJlZicsJy8nKTtcclxuXHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAgIHZhciBhY3RpdmVfZm9ybSA9ICQoJy4nICsgY3VycmVudF9mb3JtKTtcclxuICAgICAgICBhY3RpdmVfZm9ybVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmVfYWRtaW5fZm9ybScpO1xyXG4gICAgICAgIC8vJChsb2NhdGlvbikuYXR0cignaHJlZicsICcvYWRtaW4nKTtcclxuICAgIH1cclxuICAgIDtcclxuXHJcblxyXG59IiwiXHJcbnZhciBzZWxsX2xpc3Q7XHJcblxyXG52YXIgbGlzdF9tYWluX3Bob3RvO1xyXG5cclxudmFyIHVzZXJfbG9nX2luO1xyXG5cclxudmFyIGNhdGVnb3J5X2xpc3Q7XHJcblxyXG53aW5kb3cub25sb2FkID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBuYXZfaXRlbSA9ICQoJy5uYXZfX2xpbmsnKTtcclxuXHJcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbmF2X2l0ZW0ubGVuZ3RoOyBpbmRleCsrICkge1xyXG5cclxuICAgICAgICB2YXIgdGVtcCA9IG5hdl9pdGVtW2luZGV4XTtcclxuICAgICAgICB0ZW1wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlVG9BY3RpdmVMaW5rKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLypMaXN0ICovXHJcblxyXG4gICAgQ3JlYXRlTGlzdEl0ZW1zKCk7XHJcbiAgICBDcmVhdGVNYWluUGhvdG9MaXN0KCk7XHJcbiAgICBhZGRTaWRlQmFyQWRtaW4oKTtcclxuICAgIHNldEludGVydmFsKGNoYW5nZV9tYWluX3Bob3RvLDIwMDAwKTtcclxuXHJcbiAgICBzZXRDbGlja19CdXR0b25fVXNlcigpO1xyXG4gICAgLypmaXhfbWFpbl9tZW51KCk7XHJcbiAgICBGaWxsU2VsbExpc3QoKTsqL1xyXG5cclxuICAgIGZ1bmN0aW9uIENyZWF0ZU1haW5QaG90b0xpc3QoKSB7XHJcbiAgICAgICAgbGlzdF9tYWluX3Bob3RvID0gW1wiaW1hZ2VzL2NhcnVzZWwvaW1nXzEuanBnXCIsXCJpbWFnZXMvY2FydXNlbC9pbWdfMi5qcGdcIixcImltYWdlcy9jYXJ1c2VsL2ltZ18zLmpwZ1wiLFwiaW1hZ2VzL2NhcnVzZWwvaW1nXzQuanBnXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vQWRtaW4gcGFnZS8vXHJcbiAgICAkKCcjaW5wdXRfaW1nJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLGFkZEV2ZW50U2hvd0FkZEltYWdlLGZhbHNlKTtcclxuICAgICQoJyNpbnB1dF9vdGhlcl9pbWcnKVswXS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsYWRkRXZlbnRTaG93T3RoZXJzQWRkSW1hZ2UsZmFsc2UpO1xyXG4gICAgJCgnI2NsZWFyX3Bob3RvJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNsZWFyX3Bob3RvX2luX2FkbWluX3BhZ2UsZmFsc2UpO1xyXG5cclxuICAgIHZhciBhZG1pbl9pdGVtc19saSA9ICQoJy5zaWRlYmFyX2FkbWluX2xpJyk7XHJcblxyXG4gICAgZm9yKHZhciBpID0wOyBpIDw9IGFkbWluX2l0ZW1zX2xpLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICBhZG1pbl9pdGVtc19saVtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsc2xpZGVfYWN0aXZlX2FkbWluX2Zvcm0pXHJcbiAgICB9O1xyXG5cclxufSk7XHJcblxyXG4iXX0=
